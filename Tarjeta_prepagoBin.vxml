<?xml version="1.0" encoding="utf-8"?>
<vxml version="2.1" xml:lang="en-US"
		xmlns="http://www.w3.org/2001/vxml"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:gvp="http://www.genesyslab.com/2006/vxml21-extension" application="../src/ComposerRoot.vxml">

	
	<!-- VXML code generated by Composer 8.1.450.08 -->
	<!-- Diagram created by Composer: Composer 8.1.450.08 -->
	<!-- Project version: 8.1.450.08 -->
	<!-- Diagram version: 1.0 CreatedOn:  -->
	<!-- Application Author:  -->
	<!-- Release Mode: true -->

	<!-- Global Scripts includes -->
	<script src="../include/common.js" />
	<script src="../include/ctic.js" />
	<script src="../include/json.js" />
	<script src="../include/DataAccess.js" />

	<!-- Global Vars declarations -->
	<script>
		var AppState = new Object();
		AppState.System = new Object();
		AppState.System.RetainInputTypeVariableDefaultValue = false;
		AppState.CallUUID = session.connection.uuid;
		AppState.ANI = getANI();
		AppState.DNIS = getDNIS();
		AppState.USE_LCASE_USERDATAKEY = initSystemTypeVariable('USE_LCASE_USERDATAKEY',0);
  		
  		if (session.connection.protocol.sip.headers != undefined &amp;&amp;
			    session.connection.protocol.sip.headers['x-genesys-gvp-session-id']){
			AppState.GVPSessionID = session.connection.protocol.sip.headers['x-genesys-gvp-session-id'];
		} else {
			AppState.GVPSessionID = 'undefined';
		}
  			
		
		AppState.accttype = '';
		AppState.Amt = '';
		AppState.APP_ASR_LANGUAGE = initSystemTypeVariable('APP_ASR_LANGUAGE','en-US');
		AppState.APP_LANGUAGE = initSystemTypeVariable('APP_LANGUAGE','en-US');
		AppState.arrayMov = '';
		AppState.audioTipoTrx = '';
		AppState.authTD = '';
		AppState.cardseqnum = '';
		AppState.ChAutAvailBalance = '';
		AppState.ChAutCodeTxMvto = '';
		AppState.ChAutComiTxMvto = '';
		AppState.ChAutDateMvto = '';
		AppState.ChAutResponseCode = '';
		AppState.ChAutTipoBloqueoT = '';
		AppState.ChAutValueTxMvto = '';
		AppState.ChBytesEstadoResp = '';
		AppState.ChCodigoRtaValidaPIN = '';
		AppState.clave1 = '';
		AppState.clave2 = '';
		AppState.Clave64 = '';
		AppState.claveSegura = '';
		AppState.claveVal = '';
		AppState.codeTrx = '';
		AppState.comisionTrx = '';
		AppState.Compllaves = '';
		AppState.COMPOSER_WSSTUBBING = initSystemTypeVariable('COMPOSER_WSSTUBBING','0');
		AppState.concatenaInfo = '';
		AppState.consumo = '';
		AppState.contador = 0;
		AppState.CurrAmt = '';
		AppState.CurRate = '';
		AppState.datoSeguro = '';
		AppState.datosMov = '';
		AppState.desRechazo = '';
		AppState.EnableFCR = initSystemTypeVariable('EnableFCR',true);
		AppState.EnableReports = initSystemTypeVariable('EnableReports',false);
		AppState.EnableSNMP = initSystemTypeVariable('EnableSNMP',false);
		AppState.encriptado = '';
		AppState.fechaActual = '';
		AppState.fechaMov = '';
		AppState.fechaTrx = '';
		AppState.flujo = '';
		AppState.GRAMMARFILEDIR = initSystemTypeVariable('GRAMMARFILEDIR','../Resources/Grammars');
		AppState.HBYST = '';
		AppState.HIDCJ = '';
		AppState.HSECU = '';
		AppState.HTXCI = '';
		AppState.LAST_EVENT_ELEMENT = initSystemTypeVariable('LAST_EVENT_ELEMENT','undefined');
		AppState.LAST_EVENT_LINE = initSystemTypeVariable('LAST_EVENT_LINE','undefined');
		AppState.LAST_EVENT_MSG = initSystemTypeVariable('LAST_EVENT_MSG','undefined');
		AppState.LAST_EVENT_NAME = initSystemTypeVariable('LAST_EVENT_NAME','undefined');
		AppState.LAST_EVENT_URL = initSystemTypeVariable('LAST_EVENT_URL','undefined');
		AppState.lockid = '';
		AppState.log = '';
		AppState.movimientos = '';
		AppState.MSJE = '';
		AppState.numClaveSeg = '';
		AppState.numTarjetaPrepago = '';
		AppState.OCS_Record = initSystemTypeVariable('OCS_Record',getCallflowOCSRecord());
		AppState.OCS_RecordURI = initSystemTypeVariable('OCS_RecordURI',getCallflowRecordURI());
		AppState.OCS_URI = initSystemTypeVariable('OCS_URI',getCallflowOCSURI());
		AppState.persona = '';
		AppState.PREV_APP_ASR_LANGUAGE = initSystemTypeVariable('PREV_APP_ASR_LANGUAGE','undefined');
		AppState.PREV_APP_LANGUAGE = initSystemTypeVariable('PREV_APP_LANGUAGE','undefined');
		AppState.ProductId = '';
		AppState.ProductNum = '';
		AppState.registro = '';
		AppState.request = '';
		AppState.rp_AgentGroup = '';
		AppState.rp_Id = '';
		AppState.rp_servicio = '';
		AppState.rtaAutra = '';
		AppState.rtaOds = '';
		AppState.rtaPinStatus = '';
		AppState.rtaRechazo = '';
		AppState.rtaServicioSaldo = '';
		AppState.SafePhone = '';
		AppState.SCRIPTSDIR = initSystemTypeVariable('SCRIPTSDIR','../Scripts');
		AppState.ServerStatusCode = '';
		AppState.ServerStatusDesc = '';
		AppState.status = '';
		AppState.StatusCode = '';
		AppState.statuscode = '';
		AppState.StatusDesc = '';
		AppState.statusdesc = '';
		AppState.str_TDSinClave = '';
		AppState.strbinTarjetaDeb = '';
		AppState.strClaveCafetera = '';
		AppState.strDocumentoCafetera = '';
		AppState.strFinalizaLlamada = '';
		AppState.strNumeroCuenta = '';
		AppState.strRespuestaWs = '';
		AppState.SWPA = '';
		AppState.TAmt = '';
		AppState.tarjetaPrepago = '';
		AppState.TCurRate = '';
		AppState.TCVC = '';
		AppState.temporal = '';
		AppState.tipo = '';
		AppState.tipoTrx = '';
		AppState.TPIN = '';
		AppState.tramaSIP = '';
		AppState.valorTrx = '';
		AppState.VOXFILEDIR = initSystemTypeVariable('VOXFILEDIR','../Resources/Prompts');
		AppState.VPCR = '';
		AppState.menuAnt = '';
		AppState.authOk = '';
		AppState.Auth4Dig = '';
		AppState.cantTDSinBloq = '';
		AppState.TDSinBloq = '';
		AppState.authBloqueos = '';
		AppState.cafeteroMigrado = '';
		AppState.attxn_bin = '';
		AppState.attxn_pan = '';
		AppState.TarjetaCifrada = '';
		AppState.pincifrado = '';
		AppState.DB_InicioTP_mapping = [];
		AppState.DB_SaldosMov_mapping = [];
		AppState.DB_RepitMenu_mapping = [];
		AppState.DB_BloqTP_mapping = [];
		AppState.DB_CambioClaveTP_mapping = [];
		AppState.DB_Asesor_mapping = [];
		AppState.DB_IngresaNvaClave_mapping = [];
		AppState.DB_ConfirClave_mapping = [];
		AppState.DB_ClaIguales_mapping = [];
		AppState.DB_ClavesDif_mapping = [];
		AppState.DB_SuperaInten_mapping = [];
		AppState.DB_ArgusEfect_mapping = [];
		AppState.DB_CifradoDes_mapping = [];
		AppState.DB_IVPWEfect_mapping = [];
		AppState.DB_FallaIVPW_mapping = [];
		AppState.DB_IVPWExitosa_mapping = [];
		AppState.DB_IVPWNoExitosa_mapping = [];
		AppState.DB_TP_MAnt_mapping = [];
		AppState.DB_TP_RMenu_mapping = [];
		AppState.DB_BloqPerdRobo_mapping = [];
		AppState.DB_BloqTemp_mapping = [];
		AppState.DB_Falla_setCardBlock_mapping = [];
		AppState.DB_FallaInsertODS_mapping = [];
		AppState.DB_TransaccExitosa_mapping = [];
		AppState.DB_TransaccNoExitosa_mapping = [];
		AppState.DB_TP_MenuAnter_mapping = [];
		AppState.DB_ConsUlt5Mov_mapping = [];
		AppState.DB_FallagetTransacciones_mapping = [];
		AppState.DB_FallaInsODS_mapping = [];
		AppState.DB_AutraExitosa_mapping = [];
		AppState.DB_SinMov_mapping = [];
		AppState.DB_NoInput_mapping = [];
		AppState.DB_NoMatch_mapping = [];
		AppState.DB_TP_MAnterI_mapping = [];
		AppState.DB_TP_RepMenu_mapping = [];
		AppState.DB_ConsSaldoTP_mapping = [];
		AppState.DB_FallaAutra_I_mapping = [];
		AppState.DB_AutraExitosa_I_mapping = [];
		AppState.DB_AutraNoExitosa_I_mapping = [];
		AppState.DB_TrxExito_MA_mapping = [];
		AppState.DBData1_mapping = [];
		AppState.DBData2_mapping = [];
	</script>

		
	<!-- Global Scripts -->
	<script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/en-US/en-US.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/es-CO/es-CO.js'" />
	<script>var f = new Format();</script>

	
	<script srcexpr="AppState.VOXFILEDIR + '/en-US/customprompts.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/es-CO/customprompts.js'" />
	
	
	<!-- Global Properties declarations -->
	<property name="com.genesyslab.logtoasr" value="false" />   	
	<property name="com.genesyslab.loglevel" value="5" />

	<!-- Metadata information -->
	<meta name="com.genesyslab.studio.resourcePath" content="/Callflows/Tarjeta_prepagoBin.callflow"/>

	<!-- Global links -->
	<form>	
		<!-- VAR Parent Action Param -->
		<var name="varActionParentId" expr="''"/>
		<var name="cafeteros" expr="''"/>
		<var name="connid" expr="''"/>
		<var name="m_Ani" expr="''"/>
		<var name="m_ColaVQ" expr="''"/>
		<var name="m_Fecha" expr="''"/>
		<var name="m_Identificacion" expr="''"/>
		<var name="m_IdGvp" expr="''"/>
		<var name="m_IdOrs" expr="''"/>
		<var name="m_Movimiento" expr="''"/>
		<var name="m_Nombre" expr="''"/>
		<var name="m_Opcion" expr="''"/>
		<var name="m_Origen" expr="''"/>
		<var name="m_TipoId" expr="''"/>
		<var name="m_valorTRX" expr="''"/>
		<var name="RPServicios" expr="''"/>
		<var name="rutaAudios" expr="''"/>
		<var name="strNumCuentaSub" expr="''"/>
		<var name="attxn_cajero" expr="''"/>
		<block name="paramAssignment">
			<assign name="AppState.cafeteros" expr="cafeteros"/>
			<assign name="AppState.connid" expr="connid"/>
			<assign name="AppState.m_Ani" expr="m_Ani"/>
			<assign name="AppState.m_ColaVQ" expr="m_ColaVQ"/>
			<assign name="AppState.m_Fecha" expr="m_Fecha"/>
			<assign name="AppState.m_Identificacion" expr="m_Identificacion"/>
			<assign name="AppState.m_IdGvp" expr="m_IdGvp"/>
			<assign name="AppState.m_IdOrs" expr="m_IdOrs"/>
			<assign name="AppState.m_Movimiento" expr="m_Movimiento"/>
			<assign name="AppState.m_Nombre" expr="m_Nombre"/>
			<assign name="AppState.m_Opcion" expr="m_Opcion"/>
			<assign name="AppState.m_Origen" expr="m_Origen"/>
			<assign name="AppState.m_TipoId" expr="m_TipoId"/>
			<assign name="AppState.m_valorTRX" expr="m_valorTRX"/>
			<assign name="AppState.RPServicios" expr="RPServicios"/>
			<assign name="AppState.rutaAudios" expr="rutaAudios"/>
			<assign name="AppState.strNumCuentaSub" expr="strNumCuentaSub"/>
			<assign name="AppState.attxn_cajero" expr="attxn_cajero"/>
		</block>
		<block name="varAction">
			<if cond="varActionParentId==''">
				<log label="com.genesyslab.var.ActionStart" gvp:cond="AppState.EnableReports">Tarjeta_prepagoBin</log>
			<else/>
				<log label="com.genesyslab.var.ActionStart" gvp:cond="AppState.EnableReports">Tarjeta_prepagoBin|parentID=<value expr="varActionParentId"/></log>
			</if>
		</block>
		<block>
			<log expr="'Running Tarjeta_prepagoBin workflow.'"/>
			<log expr="'Code Generated by Composer: 8.1.450.08.'"/>
			<log expr="'Diagram created/upgraded by Composer: Composer 8.1.450.08.'"/>
			<log expr="'Project version: 8.1.450.08.'"/>
			<log expr="'Diagram version: 1.0 CreatedOn: .'"/>
			<goto next="#Entry1" />
		</block>
	</form>
	<!-- This is the Entry block -->
	<form id="Entry1">
		<block name="Entry">
			<goto next="#LOG_Inicio_Flujo" />
		</block>
	</form>	
    <catch event="connection.disconnect.hangup">
    	<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#BKN_Log_HU" />
    </catch>
    
    <catch event="connection.disconnect.transfer">
    	<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#BKN_Log_Transf" />
    </catch>
    
    <catch event="error">
    	<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#BKN_Log_Err" />
    </catch>

    <catch event=".">
    <return eventexpr="_event" messageexpr="_message"/> 
    </catch>
    

	<!-- This is the Backend logic block -->
	<form id="LOG_Inicio_Flujo">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: TARJETA PREPAGO ---------- ' + 
'\n AppState.ANI ----&gt; ' +AppState.ANI +
'\ Intentos Retorno-----&gt; ' + AppState.strIntentoCedula +
'\n mIdentificacion -----&gt; ' + AppState.m_Identificacion +
'\n rutaAudios -----&gt; ' + AppState.rutaAudios +
'\n RPServicios -----&gt; ' + AppState.RPServicios +
'\n authOk -----&gt; ' + AppState.authOk +
'\n Auth4Dig -----&gt; ' + AppState.Auth4Dig +
'\n authTD -----&gt; ' + AppState.authTD +
'\n attxn_cajero -----&gt; ' + AppState.attxn_cajero+
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="LOG_Inicio_FlujoData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof LOG_Inicio_FlujoData.errorMsg == 'undefined'">
        		<assign name="AppState.LOG_Inicio_FlujoResult" expr="LOG_Inicio_FlujoData" />
				<goto next="#Assign_VarNavegacion" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LOG_Inicio_FlujoData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Assign_VarNavegacion" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Assign_VarNavegacion" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_VarNavegacion">
		<block>
			
			<assign name="AppState.m_Opcion" expr="'Tarjeta Prepago'" />			
			<log expr="'Assigning variable AppState.m_Opcion with value ' +'Tarjeta Prepago'"/>
			<assign name="AppState.m_Movimiento" expr="'Inicio Tarjeta Prepago'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Inicio Tarjeta Prepago'"/>
			<assign name="AppState.concatenaInfo" expr="'TP'+';'+'99'+';'+AppState.connid+';'+AppState.m_Origen+'%3Bencoding%3Dhex%3Bpurpose%3Disdnnetwork%3Bcontent%3Disdn-uui'" />			
			<log expr="'Assigning variable AppState.concatenaInfo with value ' +'TP'+';'+'99'+';'+AppState.connid+';'+AppState.m_Origen+'%3Bencoding%3Dhex%3Bpurpose%3Disdnnetwork%3Bcontent%3Disdn-uui'"/>				
			<goto next="#DB_InicioTP" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Validar_Clave">

		<subdialog name="Validar_ClaveSubdialog" fetchhint="prefetch"  src="../src-gen/Validacion_Clave.vxml">
    		<param name="varActionParentId" expr="'Tarjeta_prepagoBin'"/>
			<param name="ADN" expr="''" />
			<param name="ActualizaDatos" expr="''" />
			<param name="BloqPerdRobo" expr="''" />
			<param name="ComerPhone" expr="''" />
			<param name="CredGA" expr="''" />
			<param name="Crediservice" expr="''" />
			<param name="CtasAho" expr="''" />
			<param name="CtasCtes" expr="''" />
			<param name="DIDVisa" expr="''" />
			<param name="EncFid" expr="''" />
			<param name="ProductId" expr="AppState.ProductId" />
			<param name="ProductNum" expr="AppState.ProductNum" />
			<param name="RPActDatos" expr="''" />
			<param name="RPBloqueos" expr="''" />
			<param name="RPBloqueos2" expr="''" />
			<param name="RPCafetero" expr="''" />
			<param name="RPCatPyme" expr="''" />
			<param name="RPCeois" expr="''" />
			<param name="RPCobranzas" expr="''" />
			<param name="RPCobranzasPref" expr="''" />
			<param name="RPInternacional" expr="''" />
			<param name="RPInternacional2" expr="''" />
			<param name="RPMesaCafetera" expr="''" />
			<param name="RPPrefPre" expr="''" />
			<param name="RPPreferente" expr="''" />
			<param name="RPPymeMedia" expr="''" />
			<param name="RPRetencionP" expr="''" />
			<param name="RPRetencionPNat" expr="''" />
			<param name="RPServicios" expr="''" />
			<param name="RPTraider" expr="''" />
			<param name="RPVentas" expr="''" />
			<param name="SafeEmail" expr="''" />
			<param name="SegmentCode" expr="''" />
			<param name="StatusCodeTI" expr="''" />
			<param name="TDBloq" expr="''" />
			<param name="TDSinBloq" expr="AppState.TDSinBloq" />
			<param name="bloqueoPINErrado" expr="''" />
			<param name="bloqueoTemp" expr="''" />
			<param name="cafeteros" expr="AppState.cafeteros" />
			<param name="cantADN" expr="''" />
			<param name="cantBloqPerdRobo" expr="''" />
			<param name="cantBloqtemp" expr="''" />
			<param name="cantCarcre" expr="''" />
			<param name="cantCardeb" expr="''" />
			<param name="cantCdts" expr="''" />
			<param name="cantCredGA" expr="''" />
			<param name="cantCrediservice" expr="''" />
			<param name="cantCreditos" expr="''" />
			<param name="cantCtasAho" expr="''" />
			<param name="cantCtasCtes" expr="''" />
			<param name="cantCuentasTotal" expr="''" />
			<param name="cantEncFid" expr="''" />
			<param name="cantTCOtros" expr="''" />
			<param name="cantTDBloq" expr="''" />
			<param name="cantTDSinBloq" expr="AppState.cantTDSinBloq" />
			<param name="cantTarjetasCredito" expr="''" />
			<param name="carcre" expr="''" />
			<param name="cardeb" expr="''" />
			<param name="cdts" expr="''" />
			<param name="connid" expr="AppState.connid" />
			<param name="creditos" expr="''" />
			<param name="cuentaSaldos" expr="''" />
			<param name="cuentasTotal" expr="''" />
			<param name="datoSeguro" expr="AppState.datoSeguro" />
			<param name="infoTCOtros" expr="''" />
			<param name="m_Ani" expr="AppState.m_Ani" />
			<param name="m_ColaVQ" expr="AppState.m_ColaVQ" />
			<param name="m_Fecha" expr="AppState.m_Fecha" />
			<param name="m_IdGvp" expr="AppState.m_IdGvp" />
			<param name="m_IdOrs" expr="AppState.m_IdOrs" />
			<param name="m_Identificacion" expr="AppState.m_Identificacion" />
			<param name="m_Movimiento" expr="AppState.m_Movimiento" />
			<param name="m_Nombre" expr="AppState.m_Nombre" />
			<param name="m_Opcion" expr="AppState.m_Opcion" />
			<param name="m_Origen" expr="AppState.m_Origen" />
			<param name="m_TipoId" expr="AppState.m_TipoId" />
			<param name="m_valorTRX" expr="AppState.m_valorTRX" />
			<param name="numClaveSegura" expr="''" />
			<param name="persona" expr="AppState.persona" />
			<param name="rutaAudios" expr="AppState.rutaAudios" />
			<param name="strIntentoCedula" expr="''" />
			<param name="strNumCuentaSub" expr="AppState.strNumCuentaSub" />
			<param name="strSwToken" expr="''" />
			<param name="strTieneToken" expr="''" />
			<param name="str_Main_numDoc" expr="AppState.m_Identificacion" />
			<param name="tarjetaPrepago" expr="AppState.tarjetaPrepago" />
			<param name="tarjetasCredito" expr="''" />
			<param name="tieneProd" expr="''" />
			<param name="tipoCtaSaldos" expr="''" />
			<param name="tramaSIP" expr="AppState.tramaSIP" />
			<param name="wrkPrioridad" expr="''" />
			<param name="Auth4Dig" expr="AppState.Auth4Dig" />
			<param name="SafePhone" expr="AppState.SafePhone" />
			<param name="attxn_cajero" expr="AppState.attxn_cajero" />
			<param name="authBloqueos" expr="AppState.authBloqueos" />
			<param name="authTD" expr="AppState.authTD" />
			<param name="cafeteroMigrado" expr="AppState.cafeteroMigrado" />
			<param name="claveSegura" expr="AppState.claveSegura" />
			<filled>
				<if cond="Validar_ClaveSubdialog.Auth4Dig != 'undefined'">
  					<assign name="AppState.Auth4Dig" expr="Validar_ClaveSubdialog.Auth4Dig" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.SafePhone != 'undefined'">
  					<assign name="AppState.SafePhone" expr="Validar_ClaveSubdialog.SafePhone" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.TarjetaCifrada != 'undefined'">
  					<assign name="AppState.TarjetaCifrada" expr="Validar_ClaveSubdialog.TarjetaCifrada" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.attxn_bin != 'undefined'">
  					<assign name="AppState.attxn_bin" expr="Validar_ClaveSubdialog.attxn_bin" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.attxn_cajero != 'undefined'">
  					<assign name="AppState.attxn_cajero" expr="Validar_ClaveSubdialog.attxn_cajero" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.attxn_pan != 'undefined'">
  					<assign name="AppState.attxn_pan" expr="Validar_ClaveSubdialog.attxn_pan" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.authBloqueos != 'undefined'">
  					<assign name="AppState.authBloqueos" expr="Validar_ClaveSubdialog.authBloqueos" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.authOk != 'undefined'">
  					<assign name="AppState.authOk" expr="Validar_ClaveSubdialog.authOk" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.authTD != 'undefined'">
  					<assign name="AppState.authTD" expr="Validar_ClaveSubdialog.authTD" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.cafeteroMigrado != 'undefined'">
  					<assign name="AppState.cafeteroMigrado" expr="Validar_ClaveSubdialog.cafeteroMigrado" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.clave1 != 'undefined'">
  					<assign name="AppState.claveVal" expr="Validar_ClaveSubdialog.clave1" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.claveSegura != 'undefined'">
  					<assign name="AppState.claveSegura" expr="Validar_ClaveSubdialog.claveSegura" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.numClaveSeg != 'undefined'">
  					<assign name="AppState.numClaveSeg" expr="Validar_ClaveSubdialog.numClaveSeg" /> 
  				</if>
				<if cond="Validar_ClaveSubdialog.pincifrado != 'undefined'">
  					<assign name="AppState.pincifrado" expr="Validar_ClaveSubdialog.pincifrado" /> 
  				</if>
				<goto next="#Menu_TarjetaPrepago" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Menu block -->
	<form id="Menu_TarjetaPrepago">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
		<property name="termchar" value="D"/>
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="Menu_TarjetaPrepagoP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3300.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1027.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2872_1.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1028.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2873_1.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1029.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3127.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1030.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3131.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1034.wav'"></audio>
    		</prompt>
		</block>
		
		<var name="retryCount" expr="1"/>
		<field name="Menu_TarjetaPrepagoOption">
			<property name="timeout" value="10s"/>
			<option dtmf="1" value="1" />
			<option dtmf="2" value="2" />
			<option dtmf="3" value="3" />
			<option dtmf="4" value="4" />
			<option dtmf="8" value="8" />
  		</field>
		<filled mode="all" namelist="Menu_TarjetaPrepagoOption">
		<assign name="AppState.registro" expr="Menu_TarjetaPrepagoOption" />
			<if cond="Menu_TarjetaPrepagoOption == '1'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='1. Consultar saldo y movimientos'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_SaldosMov" />
			</if>
			<if cond="Menu_TarjetaPrepagoOption == '2'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='2. Bloqueo de tarjeta prepago'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_BloqTP" />
			</if>
			<if cond="Menu_TarjetaPrepagoOption == '3'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='3. Cambio clave personal tarjeta prepago o tarjeta afinidad'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_CambioClaveTP" />
			</if>
			<if cond="Menu_TarjetaPrepagoOption == '4'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='4. Paso Asesor';
AppState.request=AppState.RPServicios;
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_Asesor" />
			</if>
			<if cond="Menu_TarjetaPrepagoOption == '8'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='8. Repetir menú'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_RepitMenu" />
			</if>
		</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TarjetaPrepagoP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TarjetaPrepagoP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TarjetaPrepagoP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TarjetaPrepagoP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#DBData1" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#DBData2" />
    	</catch>
	</form>

	<!-- This is the Prompt block -->
	<form id="despedida_M1">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="despedida_M1P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1024.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#log_M1" />
    	</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="log_M1">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="'\n log excepciones Menu_1_1_1 :: ---&gt;'+
'\n CallUUID :: ---&gt; ' + AppState.CallUUID+
'\n sub_chTipoIdentifica en sub callflow :: ---&gt; ' + AppState.sub_chTipoIdentifica+
'\n LAST_EVENT_ELEMENT :: ---&gt; ' +AppState.LAST_EVENT_ELEMENT+
'\n LAST_EVENT_LINE :: ---&gt; ' +AppState.LAST_EVENT_LINE+
'\n LAST_EVENT_MSG :: ---&gt; ' +AppState.LAST_EVENT_MSG+
'\n LAST_EVENT_NAME :: ---&gt; ' +AppState.LAST_EVENT_NAME+
'\n LAST_EVENT_URL :: ---&gt; ' +AppState.LAST_EVENT_URL" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="log_M1Data" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof log_M1Data.errorMsg == 'undefined'">
        		<assign name="AppState.log_M1Result" expr="log_M1Data" />
				<goto next="#DX_M1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="log_M1Data.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#DX_M1" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#DX_M1" />
    	</catch>
	</form>

	<!-- This is the Disconnect block -->
	<form id="DX_M1">
		<block>

			<disconnect />
    	</block>
	</form>

	<!-- This is the Menu block -->
	<form id="Menu_SaldoMov">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
		<property name="termchar" value="D"/>
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="Menu_SaldoMovP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1041.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1027.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2874.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1028.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3131.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1034.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1952.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1035.wav'"></audio>
    		</prompt>
		</block>
		
		<var name="retryCount" expr="1"/>
		<field name="Menu_SaldoMovOption">
			<property name="timeout" value="10s"/>
			<option dtmf="1" value="1" />
			<option dtmf="2" value="2" />
			<option dtmf="8" value="8" />
			<option dtmf="9" value="9" />
  		</field>
		<filled mode="all" namelist="Menu_SaldoMovOption">
		<assign name="AppState.registro" expr="Menu_SaldoMovOption" />
			<if cond="Menu_SaldoMovOption == '1'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='1. Consultar saldo';
AppState.accttype='S';
AppState.cardseqnum='0000000000000000';
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_ConsSaldoTP" />
			</if>
			<if cond="Menu_SaldoMovOption == '2'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='2. Consultar últimos 5 movimientos del día';
AppState.accttype='M';
AppState.rtaRechazo='';
AppState.desRechazo='';
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_ConsUlt5Mov" />
			</if>
			<if cond="Menu_SaldoMovOption == '8'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='8. Repetir menú'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_TP_RepMenu" />
			</if>
			<if cond="Menu_SaldoMovOption == '9'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='9. Menú anterior'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_TP_MAnterI" />
			</if>
		</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_SaldoMovP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_SaldoMovP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_SaldoMovP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_SaldoMovP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#DBData1" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#DBData2" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Consumo_VPCS">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="idinteraccion" expr="AppState.connid" />
    	<var name="cardid" expr="AppState.m_Identificacion" />	
		<block>
			<data name="Consumo_VPCSData" src="../src/Jsp/ReqPostCardInfoAUTInquiry.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString idinteraccion cardid" />
        	<if cond="typeof Consumo_VPCSData.errorMsg == 'undefined'">
        		<assign name="AppState.Consumo_VPCSResult" expr="Consumo_VPCSData" />
            	<if cond="typeof AppState.Consumo_VPCSResult.ChBytesEstadoResp != 'undefined'">
            		<assign name="AppState.rtaServicioSaldo" expr="AppState.Consumo_VPCSResult.ChBytesEstadoResp" />
            	</if>
            	<if cond="typeof AppState.Consumo_VPCSResult.ServerStatusDesc != 'undefined'">
            		<assign name="AppState.ServerStatusDesc" expr="AppState.Consumo_VPCSResult.ServerStatusDesc" />
            	</if>
            	<if cond="typeof AppState.Consumo_VPCSResult.Amt != 'undefined'">
            		<assign name="AppState.Amt" expr="AppState.Consumo_VPCSResult.Amt" />
            	</if>
            	<if cond="typeof AppState.Consumo_VPCSResult.CurRate != 'undefined'">
            		<assign name="AppState.CurrAmt" expr="AppState.Consumo_VPCSResult.CurRate" />
            	</if>
            	<if cond="typeof AppState.Consumo_VPCSResult.TAmt != 'undefined'">
            		<assign name="AppState.TAmt" expr="AppState.Consumo_VPCSResult.TAmt" />
            	</if>
            	<if cond="typeof AppState.Consumo_VPCSResult.TCurRate != 'undefined'">
            		<assign name="AppState.TCurRate" expr="AppState.Consumo_VPCSResult.TCurRate" />
            	</if>
            	<if cond="typeof AppState.Consumo_VPCSResult.MovimientoTC != 'undefined'">
            		<assign name="AppState.arrayMov" expr="AppState.Consumo_VPCSResult.MovimientoTC" />
            	</if>
            	<if cond="typeof AppState.Consumo_VPCSResult.movimientos != 'undefined'">
            		<assign name="AppState.movimientos" expr="AppState.Consumo_VPCSResult.movimientos" />
            	</if>
				<goto next="#Log_VPCS" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Consumo_VPCSData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Assign_FallIVPCS" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Assign_FallIVPCS" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="ValRta_VPCS">
		<block>
			<if cond="AppState.rtaServicioSaldo=='0'">
				
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='Transacción CardInfoAuthInquiry Saldo exitosa';
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#DB_AutraExitosa_I" />
			</if>
			<if cond="AppState.rtaServicioSaldo==''">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_TrxNoExitosa" />
			</if>
			<goto next="#Assign_TrxNoExitosa" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_TrxNoExitosa">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Transacción CardInfoAuthInquiry Saldo no exitosa'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Transacción CardInfoAuthInquiry Saldo no exitosa'"/>
			<assign name="AppState.rtaServicioSaldo" expr="''" />			
			<log expr="'Assigning variable AppState.rtaServicioSaldo with value ' +''"/>
			<assign name="AppState.ServerStatusDesc" expr="''" />			
			<log expr="'Assigning variable AppState.ServerStatusDesc with value ' +''"/>
			<assign name="AppState.Amt" expr="''" />			
			<log expr="'Assigning variable AppState.Amt with value ' +''"/>
			<assign name="AppState.CurrAmt" expr="''" />			
			<log expr="'Assigning variable AppState.CurrAmt with value ' +''"/>
			<assign name="AppState.TAmt" expr="''" />			
			<log expr="'Assigning variable AppState.TAmt with value ' +''"/>
			<assign name="AppState.TCurRate" expr="''" />			
			<log expr="'Assigning variable AppState.TCurRate with value ' +''"/>
			<assign name="AppState.arrayMov" expr="''" />			
			<log expr="'Assigning variable AppState.arrayMov with value ' +''"/>
			<assign name="AppState.movimientos" expr="''" />			
			<log expr="'Assigning variable AppState.movimientos with value ' +''"/>				
			<goto next="#DB_AutraNoExitosa_I" />
		</block>
	</form>

	<!-- This is the Disconnect block -->
	<form id="Disconnect1">
		<block>

			<disconnect />
    	</block>
	</form>

	<!-- This is the Menu block -->
	<form id="Menu_TrxOk">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
		<property name="termchar" value="D"/>
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="Menu_TrxOkP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3272.wav'"></audio>
				<foreach item="thePrompt" array="PlayPromptSwitch(AppState.APP_LANGUAGE, AppState.VOXFILEDIR, AppState.Amt, 'currency')">
					<audio expr="thePrompt" />
				</foreach>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1952.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1035.wav'"></audio>
    		</prompt>
		</block>
		
		<var name="retryCount" expr="1"/>
		<field name="Menu_TrxOkOption">
			<property name="timeout" value="10s"/>
			<option dtmf="9" value="9" />
  		</field>
		<filled mode="all" namelist="Menu_TrxOkOption">
		<assign name="AppState.registro" expr="Menu_TrxOkOption" />
			<if cond="Menu_TrxOkOption == '9'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='9. Menu anterior';
AppState.rtaServicioSaldo='';
AppState.ServerStatusDesc='';
AppState.Amt='';
AppState.CurrAmt='';
AppState.TAmt='';
AppState.TCurRate='';
AppState.arrayMov='';
AppState.movimientos='';
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_TrxExito_MA" />
			</if>
		</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TrxOkP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TrxOkP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TrxOkP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TrxOkP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#DBData1" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#DBData2" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="ValRta_VPCS_I">
		<block>
			<if cond="AppState.rtaAutra=='0'">
				
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='Transacción CardInfoAuthInquiry Movimientos exitosa';
AppState.ServerStatusDesc='';
AppState.rtaRechazo='';
AppState.desRechazo='';
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#DB_AutraExitosa" />
			</if>
			<if cond="AppState.rtaAutra==''">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_TrxNoExitosa_II" />
			</if>
			<goto next="#Assign_TrxNoExitosa_II" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="HayMovimientos">
		<block>
			<if cond="AppState.movimientos&gt;=1">
				
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='No tiene movimientos'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#MD_TarjetasPrepago" />
			</if>
			<goto next="#Assign_SinMov" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Au_TarjSinMov">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="Au_TarjSinMovP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2899.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1024.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Disconnect1" />
    	</block>
	</form>

	<!-- This is the Menu block -->
	<form id="Menu_Bloqueo">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
		<property name="termchar" value="D"/>
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="Menu_BloqueoP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1158.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1027.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1157.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1028.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3131.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1034.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1952.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1035.wav'"></audio>
    		</prompt>
		</block>
		
		<var name="retryCount" expr="1"/>
		<field name="Menu_BloqueoOption">
			<property name="timeout" value="10s"/>
			<option dtmf="1" value="1" />
			<option dtmf="2" value="2" />
			<option dtmf="8" value="8" />
			<option dtmf="9" value="9" />
  		</field>
		<filled mode="all" namelist="Menu_BloqueoOption">
		<assign name="AppState.registro" expr="Menu_BloqueoOption" />
			<if cond="Menu_BloqueoOption == '1'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='1. Bloqueo temporal';
AppState.lockid='V';
AppState.Compllaves='IVR_3DESCS';
AppState.desRechazo='';
AppState.rtaRechazo='';
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_BloqTemp" />
			</if>
			<if cond="Menu_BloqueoOption == '2'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='2. Bloqueo por perdida o robo';
AppState.lockid='R';
AppState.Compllaves='IVR_3DESCS';
AppState.rtaRechazo='';
AppState.desRechazo='';
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_BloqPerdRobo" />
			</if>
			<if cond="Menu_BloqueoOption == '8'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='8. Repetir menú'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_TP_RMenu" />
			</if>
			<if cond="Menu_BloqueoOption == '9'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='9. Menú anterior'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_TP_MAnt" />
			</if>
		</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_BloqueoP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_BloqueoP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_BloqueoP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_BloqueoP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#DBData1" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#DBData2" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="Assi_TrxNoExitosa">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Transacción DebitCardStatusModify no exitosa'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Transacción DebitCardStatusModify no exitosa'"/>				
			<goto next="#DB_TransaccNoExitosa" />
		</block>
	</form>

	<!-- This is the Menu block -->
	<form id="AuMenu_BloqueoTP">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
		<property name="termchar" value="D"/>
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="AuMenu_BloqueoTPP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3505.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1024.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1952.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1035.wav'"></audio>
    		</prompt>
		</block>
		
		<var name="retryCount" expr="1"/>
		<field name="AuMenu_BloqueoTPOption">
			<property name="timeout" value="10s"/>
			<option dtmf="9" value="9" />
  		</field>
		<filled mode="all" namelist="AuMenu_BloqueoTPOption">
		<assign name="AppState.registro" expr="AuMenu_BloqueoTPOption" />
			<if cond="AuMenu_BloqueoTPOption == '9'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='9. Menú anterior'
				}
				catch(err){}
				
				</script>
			
				<goto next="#DB_TP_MenuAnter" />
			</if>
		</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="AuMenu_BloqueoTPP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="AuMenu_BloqueoTPP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="AuMenu_BloqueoTPP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="AuMenu_BloqueoTPP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#despedida_M1" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#despedida_M1" />
    	</catch>
	</form>

	<!-- This is the Input block -->
	<form id="IN_CLAVE">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="IN_CLAVEP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1906.wav'"></audio>
    		</prompt>
		</block>
		
		
		<var name="retryCount" expr="1"/>
		
		<field name="IN_CLAVEField" type="digits?minlength=4;maxlength=4">
			<property name="interdigittimeout" value="5s"/>
			<property name="termchar" value="" /> 
			<property name="timeout" value="10s"/>
		</field>
    	<filled mode="all" namelist="IN_CLAVEField">
    		<assign name="AppState.clave1" expr="IN_CLAVEField" />
	        <script>resetLanguage()</script>
    		<goto next="#Assign_IngC" />
    	</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="IN_CLAVEP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="IN_CLAVEP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="IN_CLAVEP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="IN_CLAVEP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#DBData1" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#DBData2" />
    	</catch>
	</form>

	<!-- This is the Input block -->
	<form id="IN_CONF_CLAVE">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="IN_CONF_CLAVEP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1911.wav'"></audio>
    		</prompt>
		</block>
		
		
		<var name="retryCount" expr="1"/>
		
		<field name="IN_CONF_CLAVEField" type="digits?minlength=4;maxlength=4">
			<property name="interdigittimeout" value="5s"/>
			<property name="termchar" value="" /> 
			<property name="timeout" value="10s"/>
		</field>
    	<filled mode="all" namelist="IN_CONF_CLAVEField">
    		<assign name="AppState.clave2" expr="IN_CONF_CLAVEField" />
	        <script>resetLanguage()</script>
    		<goto next="#Assign_ConfC" />
    	</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="IN_CONF_CLAVEP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="IN_CONF_CLAVEP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="IN_CONF_CLAVEP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="IN_CONF_CLAVEP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#DBData1" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#DBData2" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_IngC">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Usuario ingresa nueva clave'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Usuario ingresa nueva clave'"/>				
			<goto next="#DB_IngresaNvaClave" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_ConfC">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Usuario confirma nueva clave'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Usuario confirma nueva clave'"/>				
			<goto next="#DB_ConfirClave" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Valida_Claves">
		<block>
			<if cond="AppState.clave1==AppState.clave2">
				
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='Las claves ingresadas son iguales';
AppState.Compllaves='IVR_DESIVPW';
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#DB_ClaIguales" />
			</if>
			<goto next="#Assign_ClavesNoCoin" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_ClavesNoCoin">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Las claves no coinciden'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Las claves no coinciden'"/>
			<assign name="AppState.contador" expr="AppState.contador+1;" />			
			<log expr="'Assigning variable AppState.contador with value ' +AppState.contador+1;"/>				
			<goto next="#DB_ClavesDif" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Msj_ClavesNoCoinc">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="Msj_ClavesNoCoincP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3163.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#IN_CLAVE" />
    	</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Valida_Contador">
		<block>
			<if cond="AppState.contador&gt;=3">
				
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='Supera intentos permitidos'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#DB_SuperaInten" />
			</if>
			<goto next="#Msj_ClavesNoCoinc" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="AudioFinaliza">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="AudioFinalizaP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1144.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1024.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Disconnect2" />
    	</block>
	</form>

	<!-- This is the Disconnect block -->
	<form id="Disconnect2">
		<block>

			<disconnect />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_TrxNoExito">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Cambio de clave no exitosa'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Cambio de clave no exitosa'"/>				
			<goto next="#DB_IVPWNoExitosa" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Au_CambioEfect">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="Au_CambioEfectP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3274.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Disconnect2" />
    	</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Au_CambioNoEfect">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="Au_CambioNoEfectP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3506.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Menu_TrxOk" />
    	</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Au_PasoAsesor">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="Au_PasoAsesorP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/3709.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Log_TramaSip" />
    	</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Encrip_DES">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="idinteraccion" expr="AppState.connid" />
    	<var name="clave64" expr="AppState.Clave64" />
    	<var name="pin" expr="AppState.clave2" />	
		<block>
			<data name="Encrip_DESData" src="../src/Jsp/getEncryptDES.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString idinteraccion clave64 pin" />
        	<if cond="typeof Encrip_DESData.errorMsg == 'undefined'">
        		<assign name="AppState.Encrip_DESResult" expr="Encrip_DESData" />
            	<if cond="typeof AppState.Encrip_DESResult.encriptado != 'undefined'">
            		<assign name="AppState.encriptado" expr="AppState.Encrip_DESResult.encriptado" />
            	</if>
				<goto next="#Log_CifradoDES" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Encrip_DESData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Assign_FallaCifrado" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Assign_FallaCifrado" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="ConsumoArgus">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="idinteraccion" expr="AppState.connid" />
    	<var name="Compllaves" expr="AppState.Compllaves" />	
		<block>
			<data name="ConsumoArgusData" src="../src/Jsp/ReqPostArgus.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString idinteraccion Compllaves" />
        	<if cond="typeof ConsumoArgusData.errorMsg == 'undefined'">
        		<assign name="AppState.ConsumoArgusResult" expr="ConsumoArgusData" />
            	<if cond="typeof AppState.ConsumoArgusResult.Clave64 != 'undefined'">
            		<assign name="AppState.Clave64" expr="AppState.ConsumoArgusResult.Clave64" />
            	</if>
            	<if cond="typeof AppState.ConsumoArgusResult.ChBytesEstadoResp != 'undefined'">
            		<assign name="AppState.ChBytesEstadoResp" expr="AppState.ConsumoArgusResult.ChBytesEstadoResp" />
            	</if>
				<goto next="#Log_Argus_II" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="ConsumoArgusData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Assign_FallArgus" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Assign_FallArgus" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_FallArgus">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Falla transacción efectuada'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Falla transacción efectuada'"/>
			<assign name="AppState.consumo" expr="3" />			
			<log expr="'Assigning variable AppState.consumo with value ' +3"/>				
			<goto next="#DB_ArgusEfect" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_FallaCifrado">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Falla cifrado DES'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Falla cifrado DES'"/>
			<assign name="AppState.consumo" expr="4" />			
			<log expr="'Assigning variable AppState.consumo with value ' +4"/>				
			<goto next="#DB_CifradoDes" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_FallIVPCS">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Falla transacción CardInfoAuthInquiry'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Falla transacción CardInfoAuthInquiry'"/>
			<assign name="AppState.consumo" expr="1" />			
			<log expr="'Assigning variable AppState.consumo with value ' +1"/>				
			<goto next="#DB_FallaAutra_I" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_Falla_getTransacciones">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Falla transacción getTransacciones'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Falla transacción getTransacciones'"/>
			<assign name="AppState.rtaOds" expr="1" />			
			<log expr="'Assigning variable AppState.rtaOds with value ' +1"/>
			<assign name="AppState.StatusCode" expr="1" />			
			<log expr="'Assigning variable AppState.StatusCode with value ' +1"/>				
			<goto next="#DB_FallagetTransacciones" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_FallaIVPW">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Falla transacción IVPW'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Falla transacción IVPW'"/>
			<assign name="AppState.consumo" expr="6" />			
			<log expr="'Assigning variable AppState.consumo with value ' +6"/>				
			<goto next="#DB_FallaIVPW" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_Argus_II">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: ARGUS ---------- ' + 
'\n connid ----&gt; ' +AppState.connid +
'\ Compllaves-----&gt; ' + AppState.Compllaves +
'\n Clave64 -----&gt; ' + AppState.Clave64 +
'\n ChBytesEstadoResp -----&gt; ' + AppState.ChBytesEstadoResp +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_Argus_IIData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_Argus_IIData.errorMsg == 'undefined'">
        		<assign name="AppState.Log_Argus_IIResult" expr="Log_Argus_IIData" />
				<goto next="#TrxArgus_Exitosa" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_Argus_IIData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#TrxArgus_Exitosa" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#TrxArgus_Exitosa" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_CifradoDES">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: Cifrado DES ---------- ' + 
'\n connid ----&gt; ' +AppState.connid +
'\n Clave64 -----&gt; ' + AppState.Clave64 +
'\ pin-----&gt; ' + AppState.clave2 +
'\n encriptado -----&gt; ' + AppState.encriptado +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_CifradoDESData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_CifradoDESData.errorMsg == 'undefined'">
        		<assign name="AppState.Log_CifradoDESResult" expr="Log_CifradoDESData" />
				<goto next="#CifradoDES_Exito" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_CifradoDESData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#CifradoDES_Exito" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#CifradoDES_Exito" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_IVPW">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: IVPW ---------- ' + 
'\n idinteraccion ----&gt; ' +AppState.connid +
'\n noId ----&gt; ' +AppState.m_Identificacion +
'\n pinE ----&gt; ' + AppState.numClaveSeg +
'\n numeroDoc ----&gt; ' +AppState.m_Identificacion +
'\n tipoDoc ----&gt; ' +AppState.m_TipoId +
'\n pinN ----&gt; ' + AppState.encriptado +
'\n HTXCI ----&gt; ' +AppState.HTXCI +
'\n HBYST ----&gt; ' +AppState.HBYST +
'\n HIDCJ ----&gt; ' +AppState.HIDCJ +
'\n HSECU ----&gt; ' +AppState.HSECU +
'\n MSJE ----&gt; ' +AppState.MSJE +
'\n VPCR ----&gt; ' +AppState.VPCR +
'\n SWPA ----&gt; ' +AppState.SWPA +
'\n TCVC ----&gt; ' +AppState.TCVC +
'\n TPIN ----&gt; ' +AppState.TPIN +
'\n ChBytesEstadoResp ----&gt; ' +AppState.ChBytesEstadoResp +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_IVPWData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_IVPWData.errorMsg == 'undefined'">
        		<assign name="AppState.Log_IVPWResult" expr="Log_IVPWData" />
				<goto next="#TrxIVPW_Exitosa" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_IVPWData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#TrxIVPW_Exitosa" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#TrxIVPW_Exitosa" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_VPCS">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="'\n Log Banco Bogotá GVP  :: VPCS Autra - Salida---&gt;'+
'\n connid :: ---&gt; ' + AppState.connid+
'\n cardid :: ---&gt; ' + AppState.m_Identificacion+
'\n accttype :: ---&gt; ' + AppState.accttype +
'\n ChBytesEstadoResp :: ---&gt; ' + AppState.rtaServicioSaldo+
'\n ServerStatusDesc :: ---&gt; ' + AppState.ServerStatusDesc+
'\n Amt :: ---&gt; ' + AppState.Amt+
'\n CurRate :: ---&gt; ' + AppState.CurRate+
'\n TAmt :: ---&gt; ' + AppState.TAmt+
'\n TCurRate :: ---&gt; ' + AppState.TCurRate+
'\n CantidadMov :: ---&gt; ' +AppState.movimientos+
'\n movimientos :: ---&gt; ' + AppState.arrayMov+
'\n Fin mapeo respuesta ---&gt;'" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_VPCSData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_VPCSData.errorMsg == 'undefined'">
        		<assign name="AppState.Log_VPCSResult" expr="Log_VPCSData" />
				<goto next="#ValRta_VPCS" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_VPCSData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#ValRta_VPCS" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#ValRta_VPCS" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Consumo_setCardBlock">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="idinteraccion" expr="AppState.connid" />
    	<var name="tipBlock" expr="AppState.lockid" />
    	<var name="bin" expr="AppState.strNumCuentaSub" />
    	<var name="TarjetaCifrada" expr="AppState.TarjetaCifrada" />
    	<var name="pincifrado" expr="AppState.pincifrado" />	
		<block>
			<data name="Consumo_setCardBlockData" src="../src/Jsp/TPSetCardBlock.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString idinteraccion tipBlock bin TarjetaCifrada pincifrado" />
        	<if cond="typeof Consumo_setCardBlockData.errorMsg == 'undefined'">
        		<assign name="AppState.Consumo_setCardBlockResult" expr="Consumo_setCardBlockData" />
            	<if cond="typeof AppState.Consumo_setCardBlockResult.StatusCode != 'undefined'">
            		<assign name="AppState.StatusCode" expr="AppState.Consumo_setCardBlockResult.StatusCode" />
            	</if>
            	<if cond="typeof AppState.Consumo_setCardBlockResult.ServerStatusCode != 'undefined'">
            		<assign name="AppState.ServerStatusCode" expr="AppState.Consumo_setCardBlockResult.ServerStatusCode" />
            	</if>
            	<if cond="typeof AppState.Consumo_setCardBlockResult.StatusDesc != 'undefined'">
            		<assign name="AppState.StatusDesc" expr="AppState.Consumo_setCardBlockResult.StatusDesc" />
            	</if>
            	<if cond="typeof AppState.Consumo_setCardBlockResult.ServerStatusDesc != 'undefined'">
            		<assign name="AppState.ServerStatusDesc" expr="AppState.Consumo_setCardBlockResult.ServerStatusDesc" />
            	</if>
				<goto next="#Log_setCardBlock_2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Consumo_setCardBlockData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#As_Falla_setCardBlock" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#As_Falla_setCardBlock" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_setCardBlock_2">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: INFO CONSUMO setCardBlock Entrada y salida---------- ' + 
'\n connid----&gt; ' + AppState.connid +
'\n tipBlock----&gt; ' + AppState.lockid +
'\n bin----&gt; ' + AppState.strNumCuentaSub +
'\n TarjetaCifrada----&gt; ' + AppState.TarjetaCifrada +
'\n pincifrado----&gt; ' + AppState.pincifrado +
'------------------Salida----------------------------'
'\n StatusCode----&gt; ' + AppState.StatusCode +
'\n ServerStatusCode----&gt; ' + AppState.ServerStatusCode +
'\n StatusDesc----&gt; ' + AppState.StatusDesc +
'\n ServerStatusDesc----&gt; ' + AppState.ServerStatusDesc +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_setCardBlock_2Data" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_setCardBlock_2Data.errorMsg == 'undefined'">
        		<assign name="AppState.Log_setCardBlock_2Result" expr="Log_setCardBlock_2Data" />
				<goto next="#ValidaRta_ODS" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_setCardBlock_2Data.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#ValidaRta_ODS" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#ValidaRta_ODS" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="As_Falla_setCardBlock">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Falla transacción SetCardBlock'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Falla transacción SetCardBlock'"/>
			<assign name="AppState.rtaOds" expr="1" />			
			<log expr="'Assigning variable AppState.rtaOds with value ' +1"/>
			<assign name="AppState.StatusCode" expr="1" />			
			<log expr="'Assigning variable AppState.StatusCode with value ' +1"/>				
			<goto next="#DB_Falla_setCardBlock" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Log_VPCS">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="'\n Log Banco Bogotá GVP  :: VPCS Autra-Entrada---&gt;'+
'\n connid :: ---&gt; ' + AppState.connid+
'\n cardid :: ---&gt; ' + AppState.m_Identificacion+
'\n Fin mapeo respuesta ---&gt;'" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Copy_1_Log_VPCSData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Copy_1_Log_VPCSData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Log_VPCSResult" expr="Copy_1_Log_VPCSData" />
				<goto next="#Consumo_VPCS" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Log_VPCSData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Consumo_VPCS" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Consumo_VPCS" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_getTransacciones_2">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="'\n Log Banco Bogotá GVP  :: VPCS Autra-Entrada---&gt;'+
'\n idinteraccion :: ---&gt; ' + AppState.connid+
'\n bin :: ---&gt; ' + AppState.strNumCuentaSub+
'\n TarjetaCifrada :: ---&gt; ' + AppState.TarjetaCifrada+
'\n ----------------salida-----------------------------&gt;'+
'\n StatusCode :: ---&gt; ' + AppState.StatusCode+
'\n ServerStatusCode :: ---&gt; ' + AppState.ServerStatusCode +
'\n StatusDesc :: ---&gt; ' + AppState.StatusDesc+
'\n ServerStatusDesc :: ---&gt; ' + AppState.ServerStatusDesc+
'\n Fin mapeo respuesta ---&gt;'" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_getTransacciones_2Data" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_getTransacciones_2Data.errorMsg == 'undefined'">
        		<assign name="AppState.Log_getTransacciones_2Result" expr="Log_getTransacciones_2Data" />
				<goto next="#ValidaRtaODS" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_getTransacciones_2Data.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#ValidaRtaODS" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#ValidaRtaODS" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Cons_getTransacciones">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="idinteraccion" expr="AppState.connid" />
    	<var name="bin" expr="AppState.strNumCuentaSub" />
    	<var name="TarjetaCifrada" expr="AppState.TarjetaCifrada" />	
		<block>
			<data name="Cons_getTransaccionesData" src="../src/Jsp/TPgetTransactions.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString idinteraccion bin TarjetaCifrada" />
        	<if cond="typeof Cons_getTransaccionesData.errorMsg == 'undefined'">
        		<assign name="AppState.Cons_getTransaccionesResult" expr="Cons_getTransaccionesData" />
            	<if cond="typeof AppState.Cons_getTransaccionesResult.StatusCode != 'undefined'">
            		<assign name="AppState.StatusCode" expr="AppState.Cons_getTransaccionesResult.StatusCode" />
            	</if>
            	<if cond="typeof AppState.Cons_getTransaccionesResult.ServerStatusCode != 'undefined'">
            		<assign name="AppState.ServerStatusCode" expr="AppState.Cons_getTransaccionesResult.ServerStatusCode" />
            	</if>
            	<if cond="typeof AppState.Cons_getTransaccionesResult.StatusDesc != 'undefined'">
            		<assign name="AppState.StatusDesc" expr="AppState.Cons_getTransaccionesResult.StatusDesc" />
            	</if>
            	<if cond="typeof AppState.Cons_getTransaccionesResult.ServerStatusDesc != 'undefined'">
            		<assign name="AppState.ServerStatusDesc" expr="AppState.Cons_getTransaccionesResult.ServerStatusDesc" />
            	</if>
				<goto next="#Log_getTransacciones_2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Cons_getTransaccionesData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Assign_Falla_getTransacciones" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Assign_Falla_getTransacciones" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_getTransacciones">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="'\n Log Banco Bogotá GVP  :: VPCS Autra-Entrada---&gt;'+
'\n idinteraccion :: ---&gt; ' + AppState.connid+
'\n bin :: ---&gt; ' + AppState.strNumCuentaSub+
'\n TarjetaCifrada :: ---&gt; ' + AppState.TarjetaCifrada+
'\n ----------------salida-----------------------------&gt;'+
'\n StatusCode :: ---&gt; ' + AppState.StatusCode+
'\n ServerStatusCode :: ---&gt; ' + AppState.ServerStatusCode +
'\n StatusDesc :: ---&gt; ' + AppState.StatusDesc+
'\n ServerStatusDesc :: ---&gt; ' + AppState.ServerStatusDesc+
'\n Fin mapeo respuesta ---&gt;'" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_getTransaccionesData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_getTransaccionesData.errorMsg == 'undefined'">
        		<assign name="AppState.Log_getTransaccionesResult" expr="Log_getTransaccionesData" />
				<goto next="#Cons_getTransacciones" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_getTransaccionesData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Cons_getTransacciones" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Cons_getTransacciones" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_setCardBlock">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: INFO CONSUMO DEBITCARDPINSTATUS-Entrada---------- ' + 
'\n connid----&gt; ' + AppState.connid +
'\n tipBlock----&gt; ' + AppState.lockid +
'\n bin----&gt; ' + AppState.strNumCuentaSub +
'\n TarjetaCifrada----&gt; ' + AppState.TarjetaCifrada +
'\n pincifrado----&gt; ' + AppState.pincifrado +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_setCardBlockData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_setCardBlockData.errorMsg == 'undefined'">
        		<assign name="AppState.Log_setCardBlockResult" expr="Log_setCardBlockData" />
				<goto next="#Consumo_setCardBlock" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_setCardBlockData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Consumo_setCardBlock" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Consumo_setCardBlock" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Log_IVPW">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: IVPW-Entrada ---------- ' + 
'\n idinteraccion ----&gt; ' +AppState.connid +
'\n noId ----&gt; ' +AppState.m_Identificacion +
'\n pinE ----&gt; ' + AppState.numClaveSeg +
'\n numeroDoc ----&gt; ' +AppState.m_Identificacion +
'\n tipoDoc ----&gt; ' +AppState.m_TipoId +
'\n pinN ----&gt; ' + AppState.encriptado +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Copy_1_Log_IVPWData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Copy_1_Log_IVPWData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Log_IVPWResult" expr="Copy_1_Log_IVPWData" />
				<goto next="#Cons_IVPW_I" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Log_IVPWData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Cons_IVPW_I" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Cons_IVPW_I" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Log_CifradoDES">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: Cifrado DES ---------- ' + 
'\n connid ----&gt; ' +AppState.connid +
'\n Clave64 -----&gt; ' + AppState.Clave64 +
'\ pin-----&gt; ' + AppState.clave2 +
'\n encriptado -----&gt; ' + AppState.encriptado +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Copy_1_Log_CifradoDESData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Copy_1_Log_CifradoDESData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Log_CifradoDESResult" expr="Copy_1_Log_CifradoDESData" />
				<goto next="#Encrip_DES" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Log_CifradoDESData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Encrip_DES" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Encrip_DES" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="InsertODS">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="connid" expr="AppState.connid" />
    	<var name="attxn_cod_transac" expr="'TPBL'" />
    	<var name="attxn_byte_estado" expr="AppState.rtaOds" />
    	<var name="attxn_cod_rechazo" expr="AppState.rtaRechazo" />
    	<var name="attxn_des_rechazo" expr="AppState.desRechazo" />
    	<var name="attxn_cod_tran_ori" expr="'TPBL'" />
    	<var name="attxn_val_transac" expr="''" />
    	<var name="attxn_tip_iden_cli" expr="AppState.m_TipoId" />
    	<var name="attxn_num_iden_cli" expr="''" />
    	<var name="attxn_desc_txn" expr="'Bloqueo automático tarjeta prepago'" />
    	<var name="attxn_pan" expr="AppState.m_Identificacion" />
    	<var name="attxn_soporte_txn" expr="'Bloqueo automático tarjeta prepago'" />
    	<var name="attxn_bin_tarj" expr="AppState.strNumCuentaSub" />
    	<var name="attxn_cod_serv" expr="''" />
    	<var name="attxn_cajero" expr="AppState.attxn_cajero" />	
		<block>
			<data name="InsertODSData" src="../src/Jsp/setODS.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString connid attxn_cod_transac attxn_byte_estado attxn_cod_rechazo attxn_des_rechazo attxn_cod_tran_ori attxn_val_transac attxn_tip_iden_cli attxn_num_iden_cli attxn_desc_txn attxn_pan attxn_soporte_txn attxn_bin_tarj attxn_cod_serv attxn_cajero" />
        	<if cond="typeof InsertODSData.errorMsg == 'undefined'">
        		<assign name="AppState.InsertODSResult" expr="InsertODSData" />
            	<if cond="typeof AppState.InsertODSResult.status != 'undefined'">
            		<assign name="AppState.status" expr="AppState.InsertODSResult.status" />
            	</if>
				<goto next="#ValRta_setCardBlock" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="InsertODSData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#As_FallaODS" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#As_FallaODS" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="As_FallaODS">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Falla InsertODS'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Falla InsertODS'"/>				
			<goto next="#DB_FallaInsertODS" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Cons_IVPW_I">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="idinteraccion" expr="AppState.connid" />
    	<var name="noId" expr="AppState.m_Identificacion" />
    	<var name="pinE" expr="AppState.numClaveSeg" />
    	<var name="numeroDoc" expr="AppState.m_Identificacion" />
    	<var name="tipoDoc" expr="AppState.m_TipoId" />
    	<var name="pinN" expr="AppState.encriptado" />	
		<block>
			<data name="Cons_IVPW_IData" src="../src/Jsp/ReqPostIVPW3.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString idinteraccion noId pinE numeroDoc tipoDoc pinN" />
        	<if cond="typeof Cons_IVPW_IData.errorMsg == 'undefined'">
        		<assign name="AppState.Cons_IVPW_IResult" expr="Cons_IVPW_IData" />
            	<if cond="typeof AppState.Cons_IVPW_IResult.HTXCI != 'undefined'">
            		<assign name="AppState.HTXCI" expr="AppState.Cons_IVPW_IResult.HTXCI" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.HBYST != 'undefined'">
            		<assign name="AppState.HBYST" expr="AppState.Cons_IVPW_IResult.HBYST" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.HIDCJ != 'undefined'">
            		<assign name="AppState.HIDCJ" expr="AppState.Cons_IVPW_IResult.HIDCJ" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.HSECU != 'undefined'">
            		<assign name="AppState.HSECU" expr="AppState.Cons_IVPW_IResult.HSECU" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.MSJE != 'undefined'">
            		<assign name="AppState.MSJE" expr="AppState.Cons_IVPW_IResult.MSJE" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.VPCR != 'undefined'">
            		<assign name="AppState.VPCR" expr="AppState.Cons_IVPW_IResult.VPCR" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.SWPA != 'undefined'">
            		<assign name="AppState.SWPA" expr="AppState.Cons_IVPW_IResult.SWPA" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.TCVC != 'undefined'">
            		<assign name="AppState.TCVC" expr="AppState.Cons_IVPW_IResult.TCVC" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.TPIN != 'undefined'">
            		<assign name="AppState.TPIN" expr="AppState.Cons_IVPW_IResult.TPIN" />
            	</if>
            	<if cond="typeof AppState.Cons_IVPW_IResult.ChBytesEstadoResp != 'undefined'">
            		<assign name="AppState.ChBytesEstadoResp" expr="AppState.Cons_IVPW_IResult.ChBytesEstadoResp" />
            	</if>
				<goto next="#Log_IVPW" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Cons_IVPW_IData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Assign_FallaIVPW" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Assign_FallaIVPW" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="TrxIVPW_Exitosa">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Transacción IVPW efectuada'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Transacción IVPW efectuada'"/>				
			<goto next="#DB_IVPWEfect" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="TrxArgus_Exitosa">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Transacción Argus efectuada'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Transacción Argus efectuada'"/>				
			<goto next="#DB_ArgusEfect" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="CifradoDES_Exito">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Cifrado DES exitoso'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Cifrado DES exitoso'"/>
			<assign name="AppState.m_TipoId" expr="'C'" />			
			<log expr="'Assigning variable AppState.m_TipoId with value ' +'C'"/>				
			<goto next="#DB_CifradoDes" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="MD_TarjetasPrepago">

		<subdialog name="MD_TarjetasPrepagoSubdialog" fetchhint="prefetch"  src="../src-gen/Menu_Dinamico_TarjPrep_Mov.vxml">
    		<param name="varActionParentId" expr="'Tarjeta_prepagoBin'"/>
			<param name="cantCardeb" expr="AppState.movimientos" />
			<param name="cardeb" expr="AppState.arrayMov" />
			<param name="connid" expr="AppState.connid" />
			<param name="fechaActual" expr="AppState.fechaActual" />
			<param name="m_Ani" expr="AppState.m_Ani" />
			<param name="m_ColaVQ" expr="AppState.m_ColaVQ" />
			<param name="m_Fecha" expr="AppState.m_Fecha" />
			<param name="m_IdGvp" expr="AppState.m_IdGvp" />
			<param name="m_IdOrs" expr="AppState.m_IdOrs" />
			<param name="m_Identificacion" expr="AppState.m_Identificacion" />
			<param name="m_Movimiento" expr="AppState.m_Movimiento" />
			<param name="m_Opcion" expr="AppState.m_Opcion" />
			<param name="m_Origen" expr="AppState.m_Origen" />
			<param name="m_TipoId" expr="AppState.m_TipoId" />
			<param name="m_valorTRX" expr="AppState.m_valorTRX" />
			<param name="rutaAudios" expr="AppState.rutaAudios" />
			<param name="strContadorTD" expr="''" />
			<param name="strNumeroCuenta" expr="AppState.m_Identificacion" />
			<filled>
				<goto next="#Menu_TrxOkMenuAnt" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_InsertODS">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="connid" expr="AppState.connid" />
    	<var name="attxn_cod_transac" expr="'TPCS'" />
    	<var name="attxn_byte_estado" expr="AppState.rtaOds" />
    	<var name="attxn_cod_rechazo" expr="AppState.rtaRechazo" />
    	<var name="attxn_des_rechazo" expr="AppState.desRechazo" />
    	<var name="attxn_cod_tran_ori" expr="'TPCS'" />
    	<var name="attxn_val_transac" expr="''" />
    	<var name="attxn_tip_iden_cli" expr="AppState.m_TipoId" />
    	<var name="attxn_num_iden_cli" expr="''" />
    	<var name="attxn_desc_txn" expr="'Consulta de movimientos Visa pagos'" />
    	<var name="attxn_pan" expr="AppState.m_Identificacion" />
    	<var name="attxn_soporte_txn" expr="'Consulta de movimientos Visa pagos'" />
    	<var name="attxn_bin_tarj" expr="AppState.m_Identificacion.substring(0,6)" />
    	<var name="attxn_cod_serv" expr="''" />
    	<var name="attxn_cajero" expr="AppState.attxn_cajero" />	
		<block>
			<data name="Copy_1_InsertODSData" src="../src/Jsp/setODS.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString connid attxn_cod_transac attxn_byte_estado attxn_cod_rechazo attxn_des_rechazo attxn_cod_tran_ori attxn_val_transac attxn_tip_iden_cli attxn_num_iden_cli attxn_desc_txn attxn_pan attxn_soporte_txn attxn_bin_tarj attxn_cod_serv attxn_cajero" />
        	<if cond="typeof Copy_1_InsertODSData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_InsertODSResult" expr="Copy_1_InsertODSData" />
            	<if cond="typeof AppState.Copy_1_InsertODSResult.status != 'undefined'">
            		<assign name="AppState.status" expr="AppState.Copy_1_InsertODSResult.status" />
            	</if>
				<goto next="#ValRta_VPCS_I" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_InsertODSData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Copy_1_As_FallaODS" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Copy_1_As_FallaODS" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_1_As_FallaODS">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Falla InsertODS'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Falla InsertODS'"/>
			<assign name="AppState.consumo" expr="2" />			
			<log expr="'Assigning variable AppState.consumo with value ' +2"/>				
			<goto next="#DB_FallaInsODS" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Ass_RtagetTransacciones">
		<block>
			
			<assign name="AppState.rtaOds" expr="1" />			
			<log expr="'Assigning variable AppState.rtaOds with value ' +1"/>
			<assign name="AppState.rtaRechazo" expr="AppState.StatusCode" />			
			<log expr="'Assigning variable AppState.rtaRechazo with value ' +AppState.StatusCode"/>
			<assign name="AppState.desRechazo" expr="AppState.StatusDesc" />			
			<log expr="'Assigning variable AppState.desRechazo with value ' +AppState.StatusDesc"/>				
			<goto next="#Copy_1_InsertODS" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ValidaRtaODS">
		<block>
			<if cond="AppState.StatusCode == ''">
				
				<!-- This is the OutLink -->
				<goto next="#Ass_RtagetTransacciones" />
			</if>
			<if cond="AppState.StatusCode == '0' || AppState.StatusCode == 0">
				
				<!-- Post Action -->
				<script>try{
				AppState.rtaOds=0
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_InsertODS" />
			</if>
			<goto next="#Ass_RtagetTransacciones" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Copy_1_despedida_M1">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="Copy_1_despedida_M1P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1023.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1024.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Disconnect1" />
    	</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ValidaRta_ODS">
		<block>
			<if cond="AppState.StatusCode == ''">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_RtaODS" />
			</if>
			<if cond="AppState.StatusCode == '0' || AppState.StatusCode ==0">
				
				<!-- Post Action -->
				<script>try{
				AppState.rtaOds=0
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#InsertODS" />
			</if>
			<goto next="#Assign_RtaODS" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_RtaODS">
		<block>
			
			<assign name="AppState.rtaOds" expr="1" />			
			<log expr="'Assigning variable AppState.rtaOds with value ' +1"/>
			<assign name="AppState.rtaRechazo" expr="AppState.StatusCode" />			
			<log expr="'Assigning variable AppState.rtaRechazo with value ' +AppState.StatusCode"/>
			<assign name="AppState.desRechazo" expr="AppState.StatusDesc" />			
			<log expr="'Assigning variable AppState.desRechazo with value ' +AppState.StatusDesc"/>				
			<goto next="#InsertODS" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Log_Argus_II">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: ARGUS ---------- ' + 
'\n connid ----&gt; ' +AppState.connid +
'\ Compllaves-----&gt; ' + AppState.Compllaves +
'\n Clave64 -----&gt; ' + AppState.Clave64 +
'\n ChBytesEstadoResp -----&gt; ' + AppState.ChBytesEstadoResp +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Copy_1_Log_Argus_IIData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Copy_1_Log_Argus_IIData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Log_Argus_IIResult" expr="Copy_1_Log_Argus_IIData" />
				<goto next="#ConsumoArgus" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Log_Argus_IIData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#ConsumoArgus" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#ConsumoArgus" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_TramaSIP">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: TRAMA SIP---------- ' + 
'\n m_TipoId----&gt; ' + AppState.m_TipoId +
'\n m_Identificacion----&gt; ' + AppState.m_Identificacion +
'\n connid----&gt; ' + AppState.connid +
'\n idLinea----&gt; ' + AppState.idLinea +
'\n TramaSIP----&gt; ' + AppState.tramaSIP +
'\n concatenaInfo----&gt; ' + AppState.concatenaInfo +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_TramaSIPData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_TramaSIPData.errorMsg == 'undefined'">
        		<assign name="AppState.Log_TramaSIPResult" expr="Log_TramaSIPData" />
				<goto next="#Validar_Clave" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_TramaSIPData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Validar_Clave" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Validar_Clave" />
    	</catch>
	</form>

	<!-- This is the Transfer block -->
	<form id="Transfer1">
		<property name="inputmodes" value="dtmf" />
		<script>
			var callVars = new Object();
			callVars['Sip.Refer.User-to-User'] = AppState.concatenaInfo;
		</script>
		<block>
			<log> callVars= <value expr="callVars.toSource()" /> </log>
		</block>
	    <transfer name="Transfer1Call" type="blind" destexpr="AppState.request" gvp:signalvar="callVars" gvp:method="refer" 
	    		gvp:analysis="false" gvp:connectwhen="immediate" >	
    	</transfer>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Log_TramaSip">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'0'" />
    	<var name="log" expr="' ---------- REGISTRO DATOS LLAMADA GVP:: BANCO DE BOGOTA SERVILINEA :: LOG TRAMA SIP---------- ' + 
'\n connid----&gt; ' + AppState.connid +
'\n concatenaInfo----&gt; ' + AppState.concatenaInfo +
'\n ---------- FIN REGISTRO LLAMADA ---------- '" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="Log_TramaSipData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof Log_TramaSipData.errorMsg == 'undefined'">
        		<assign name="AppState.Log_TramaSipResult" expr="Log_TramaSipData" />
				<goto next="#Transfer1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Log_TramaSipData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Transfer1" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Transfer1" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="ValidaRta_TrxIVPW">
		<block>
			<if cond="AppState.VPCR==00 || AppState.VPCR=='00'">
				
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='Cambio de clave exitosa'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#DB_IVPWExitosa" />
			</if>
			<if cond="AppState.VPCR==''">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_TrxNoExito" />
			</if>
			<goto next="#Assign_TrxNoExito" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_SinMov">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Sin movimientos'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Sin movimientos'"/>				
			<goto next="#DB_SinMov" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Despedida_Fin">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
        
    	<block name="Despedida_FinP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1023.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1024.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Disconnect1" />
    	</block>
	</form>

	<!-- This is the Menu block -->
	<form id="Menu_TrxOkMenuAnt">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + 'es-CO' + '/' + 'es-CO' + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = 'es-CO';
	            AppState.APP_ASR_LANGUAGE = 'es-CO';
	        </script>
        </block>
        
		<property name="termchar" value="D"/>
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="Menu_TrxOkMenuAntP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1952.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1035.wav'"></audio>
    		</prompt>
		</block>
		
		<var name="retryCount" expr="1"/>
		<field name="Menu_TrxOkMenuAntOption">
			<property name="timeout" value="10s"/>
			<option dtmf="9" value="9" />
  		</field>
		<filled mode="all" namelist="Menu_TrxOkMenuAntOption">
		<assign name="AppState.registro" expr="Menu_TrxOkMenuAntOption" />
			<if cond="Menu_TrxOkMenuAntOption == '9'">
	        <script>resetLanguage()</script>
            
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento='9. Menu anterior';
AppState.rtaServicioSaldo='';
AppState.ServerStatusDesc='';
AppState.Amt='';
AppState.CurrAmt='';
AppState.TAmt='';
AppState.TCurRate='';
AppState.arrayMov='';
AppState.movimientos='';
				}
				catch(err){}
				
				</script>
			
				<goto next="#Menu_TarjetaPrepago" />
			</if>
		</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TrxOkMenuAntP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TrxOkMenuAntP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/2148.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TrxOkMenuAntP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'audios/1037.wav'"></audio>
  		</prompt>
  		<clear namelist="Menu_TrxOkMenuAntP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#DB_NoInput" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#DB_NoMatch" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="BKN_Log_HU">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'4'" />
    	<var name="log" expr="' Error en llamada :: BANCO DE BOGOTA SERVILINEA :: TARJETA PREPAGO ' + 
'\n HangUp -----&gt;  ' + AppState.CallUUID + 
'\n AppState.LAST_EVENT_ELEMENT ----&gt; ' + AppState.LAST_EVENT_ELEMENT +
'\n AppState.LAST_EVENT_LINE -----&gt; ' + AppState.LAST_EVENT_LINE +
'\n AppState.LAST_EVENT_MSG -----&gt; ' + AppState.LAST_EVENT_MSG +
'\n AppState.LAST_EVENT_NAME -----&gt; ' + AppState.LAST_EVENT_NAME +
'\n AppState.LAST_EVENT_URL -----&gt; ' + AppState.LAST_EVENT_URL" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="BKN_Log_HUData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof BKN_Log_HUData.errorMsg == 'undefined'">
        		<assign name="AppState.BKN_Log_HUResult" expr="BKN_Log_HUData" />
				<goto next="#Disconnect7" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="BKN_Log_HUData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Disconnect7" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Disconnect7" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="BKN_Log_Transf">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'4'" />
    	<var name="log" expr="' Error en llamada :: BANCO DE BOGOTA SERVILINEA :: TARJETA PREPAGO ' + 
'\n Transfer-----&gt;  ' + AppState.CallUUID + 
'\n AppState.LAST_EVENT_ELEMENT ----&gt; ' + AppState.LAST_EVENT_ELEMENT +
'\n AppState.LAST_EVENT_LINE -----&gt; ' + AppState.LAST_EVENT_LINE +
'\n AppState.LAST_EVENT_MSG -----&gt; ' + AppState.LAST_EVENT_MSG +
'\n AppState.LAST_EVENT_NAME -----&gt; ' + AppState.LAST_EVENT_NAME +
'\n AppState.LAST_EVENT_URL -----&gt; ' + AppState.LAST_EVENT_URL" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="BKN_Log_TransfData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof BKN_Log_TransfData.errorMsg == 'undefined'">
        		<assign name="AppState.BKN_Log_TransfResult" expr="BKN_Log_TransfData" />
				<goto next="#Disconnect7" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="BKN_Log_TransfData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Disconnect7" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Disconnect7" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="BKN_Log_Err">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="tipo" expr="'4'" />
    	<var name="log" expr="' Error en llamada :: BANCO DE BOGOTA SERVILINEA :: TARJETA PREPAGO ' + 
'\n Error General -----&gt;  ' + AppState.CallUUID + 
'\n AppState.LAST_EVENT_ELEMENT ----&gt; ' + AppState.LAST_EVENT_ELEMENT +
'\n AppState.LAST_EVENT_LINE -----&gt; ' + AppState.LAST_EVENT_LINE +
'\n AppState.LAST_EVENT_MSG -----&gt; ' + AppState.LAST_EVENT_MSG +
'\n AppState.LAST_EVENT_NAME -----&gt; ' + AppState.LAST_EVENT_NAME +
'\n AppState.LAST_EVENT_URL -----&gt; ' + AppState.LAST_EVENT_URL" />
    	<var name="idinteraccion" expr="AppState.CallUUID" />	
		<block>
			<data name="BKN_Log_ErrData" src="../src/Jsp/LogID.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString tipo log idinteraccion" />
        	<if cond="typeof BKN_Log_ErrData.errorMsg == 'undefined'">
        		<assign name="AppState.BKN_Log_ErrResult" expr="BKN_Log_ErrData" />
				<goto next="#Disconnect7" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="BKN_Log_ErrData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Disconnect7" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Disconnect7" />
    	</catch>
	</form>

	<!-- This is the Disconnect block -->
	<form id="Disconnect7">
		<block>

			<disconnect />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_TrxNoExitosa_II">
		<block>
			
			<assign name="AppState.m_Movimiento" expr="'Transacción CardInfoAuthInquiry Movimientos no exitosa'" />			
			<log expr="'Assigning variable AppState.m_Movimiento with value ' +'Transacción CardInfoAuthInquiry Movimientos no exitosa'"/>				
			<goto next="#DB_AutraNoExitosa_I" />
		</block>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_InicioTP">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_InicioTPData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_InicioTPData.errorMsg == 'undefined'">
            	<if cond="typeof DB_InicioTPData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_InicioTPDBResult" expr="DB_InicioTPData.db_result" />
            		
            		<assign name="AppState.DB_InicioTPDBResultColumnNames" expr="DB_InicioTPData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_InicioTPData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_InicioTPData.db_outparams"/>
					
            	</if>
    			<goto next="#Log_TramaSIP" />
        	<else/>
        	    <if cond="typeof DB_InicioTPData.errorType != 'undefined'">
        	        <if cond="DB_InicioTPData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_InicioTPData.errorMsg" />
    	            <elseif cond="DB_InicioTPData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_InicioTPData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_InicioTPData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Log_TramaSIP" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Log_TramaSIP" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Log_TramaSIP" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_SaldosMov">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_SaldosMovData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_SaldosMovData.errorMsg == 'undefined'">
            	<if cond="typeof DB_SaldosMovData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_SaldosMovDBResult" expr="DB_SaldosMovData.db_result" />
            		
            		<assign name="AppState.DB_SaldosMovDBResultColumnNames" expr="DB_SaldosMovData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_SaldosMovData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_SaldosMovData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_SaldoMov" />
        	<else/>
        	    <if cond="typeof DB_SaldosMovData.errorType != 'undefined'">
        	        <if cond="DB_SaldosMovData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_SaldosMovData.errorMsg" />
    	            <elseif cond="DB_SaldosMovData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_SaldosMovData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_SaldosMovData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_SaldoMov" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_SaldoMov" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_SaldoMov" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_RepitMenu">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_RepitMenuData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_RepitMenuData.errorMsg == 'undefined'">
            	<if cond="typeof DB_RepitMenuData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_RepitMenuDBResult" expr="DB_RepitMenuData.db_result" />
            		
            		<assign name="AppState.DB_RepitMenuDBResultColumnNames" expr="DB_RepitMenuData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_RepitMenuData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_RepitMenuData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_TarjetaPrepago" />
        	<else/>
        	    <if cond="typeof DB_RepitMenuData.errorType != 'undefined'">
        	        <if cond="DB_RepitMenuData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_RepitMenuData.errorMsg" />
    	            <elseif cond="DB_RepitMenuData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_RepitMenuData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_RepitMenuData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_BloqTP">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_BloqTPData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_BloqTPData.errorMsg == 'undefined'">
            	<if cond="typeof DB_BloqTPData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_BloqTPDBResult" expr="DB_BloqTPData.db_result" />
            		
            		<assign name="AppState.DB_BloqTPDBResultColumnNames" expr="DB_BloqTPData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_BloqTPData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_BloqTPData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_Bloqueo" />
        	<else/>
        	    <if cond="typeof DB_BloqTPData.errorType != 'undefined'">
        	        <if cond="DB_BloqTPData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_BloqTPData.errorMsg" />
    	            <elseif cond="DB_BloqTPData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_BloqTPData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_BloqTPData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_Bloqueo" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_Bloqueo" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_Bloqueo" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_CambioClaveTP">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_CambioClaveTPData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_CambioClaveTPData.errorMsg == 'undefined'">
            	<if cond="typeof DB_CambioClaveTPData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_CambioClaveTPDBResult" expr="DB_CambioClaveTPData.db_result" />
            		
            		<assign name="AppState.DB_CambioClaveTPDBResultColumnNames" expr="DB_CambioClaveTPData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_CambioClaveTPData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_CambioClaveTPData.db_outparams"/>
					
            	</if>
    			<goto next="#IN_CLAVE" />
        	<else/>
        	    <if cond="typeof DB_CambioClaveTPData.errorType != 'undefined'">
        	        <if cond="DB_CambioClaveTPData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_CambioClaveTPData.errorMsg" />
    	            <elseif cond="DB_CambioClaveTPData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_CambioClaveTPData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_CambioClaveTPData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#IN_CLAVE" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#IN_CLAVE" />
        </catch>
    	<catch event="error.com.genesyslab.composer.variablemappingerror">
    		<goto next="#IN_CLAVE" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_Asesor">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_AsesorData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_AsesorData.errorMsg == 'undefined'">
            	<if cond="typeof DB_AsesorData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_AsesorDBResult" expr="DB_AsesorData.db_result" />
            		
            		<assign name="AppState.DB_AsesorDBResultColumnNames" expr="DB_AsesorData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_AsesorData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_AsesorData.db_outparams"/>
					
            	</if>
    			<goto next="#Au_PasoAsesor" />
        	<else/>
        	    <if cond="typeof DB_AsesorData.errorType != 'undefined'">
        	        <if cond="DB_AsesorData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_AsesorData.errorMsg" />
    	            <elseif cond="DB_AsesorData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_AsesorData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_AsesorData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Au_PasoAsesor" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Au_PasoAsesor" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Au_PasoAsesor" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_IngresaNvaClave">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_IngresaNvaClaveData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_IngresaNvaClaveData.errorMsg == 'undefined'">
            	<if cond="typeof DB_IngresaNvaClaveData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_IngresaNvaClaveDBResult" expr="DB_IngresaNvaClaveData.db_result" />
            		
            		<assign name="AppState.DB_IngresaNvaClaveDBResultColumnNames" expr="DB_IngresaNvaClaveData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_IngresaNvaClaveData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_IngresaNvaClaveData.db_outparams"/>
					
            	</if>
    			<goto next="#IN_CONF_CLAVE" />
        	<else/>
        	    <if cond="typeof DB_IngresaNvaClaveData.errorType != 'undefined'">
        	        <if cond="DB_IngresaNvaClaveData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_IngresaNvaClaveData.errorMsg" />
    	            <elseif cond="DB_IngresaNvaClaveData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_IngresaNvaClaveData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_IngresaNvaClaveData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#IN_CONF_CLAVE" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#IN_CONF_CLAVE" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#IN_CONF_CLAVE" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_ConfirClave">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_ConfirClaveData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_ConfirClaveData.errorMsg == 'undefined'">
            	<if cond="typeof DB_ConfirClaveData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_ConfirClaveDBResult" expr="DB_ConfirClaveData.db_result" />
            		
            		<assign name="AppState.DB_ConfirClaveDBResultColumnNames" expr="DB_ConfirClaveData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_ConfirClaveData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_ConfirClaveData.db_outparams"/>
					
            	</if>
    			<goto next="#Valida_Claves" />
        	<else/>
        	    <if cond="typeof DB_ConfirClaveData.errorType != 'undefined'">
        	        <if cond="DB_ConfirClaveData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_ConfirClaveData.errorMsg" />
    	            <elseif cond="DB_ConfirClaveData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_ConfirClaveData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_ConfirClaveData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Valida_Claves" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Valida_Claves" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Valida_Claves" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_ClaIguales">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_ClaIgualesData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_ClaIgualesData.errorMsg == 'undefined'">
            	<if cond="typeof DB_ClaIgualesData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_ClaIgualesDBResult" expr="DB_ClaIgualesData.db_result" />
            		
            		<assign name="AppState.DB_ClaIgualesDBResultColumnNames" expr="DB_ClaIgualesData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_ClaIgualesData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_ClaIgualesData.db_outparams"/>
					
            	</if>
    			<goto next="#Copy_1_Log_Argus_II" />
        	<else/>
        	    <if cond="typeof DB_ClaIgualesData.errorType != 'undefined'">
        	        <if cond="DB_ClaIgualesData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_ClaIgualesData.errorMsg" />
    	            <elseif cond="DB_ClaIgualesData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_ClaIgualesData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_ClaIgualesData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Copy_1_Log_Argus_II" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Copy_1_Log_Argus_II" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Copy_1_Log_Argus_II" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_ClavesDif">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_ClavesDifData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_ClavesDifData.errorMsg == 'undefined'">
            	<if cond="typeof DB_ClavesDifData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_ClavesDifDBResult" expr="DB_ClavesDifData.db_result" />
            		
            		<assign name="AppState.DB_ClavesDifDBResultColumnNames" expr="DB_ClavesDifData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_ClavesDifData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_ClavesDifData.db_outparams"/>
					
            	</if>
    			<goto next="#Valida_Contador" />
        	<else/>
        	    <if cond="typeof DB_ClavesDifData.errorType != 'undefined'">
        	        <if cond="DB_ClavesDifData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_ClavesDifData.errorMsg" />
    	            <elseif cond="DB_ClavesDifData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_ClavesDifData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_ClavesDifData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Valida_Contador" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Valida_Contador" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Valida_Contador" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_SuperaInten">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_SuperaIntenData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_SuperaIntenData.errorMsg == 'undefined'">
            	<if cond="typeof DB_SuperaIntenData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_SuperaIntenDBResult" expr="DB_SuperaIntenData.db_result" />
            		
            		<assign name="AppState.DB_SuperaIntenDBResultColumnNames" expr="DB_SuperaIntenData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_SuperaIntenData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_SuperaIntenData.db_outparams"/>
					
            	</if>
    			<goto next="#AudioFinaliza" />
        	<else/>
        	    <if cond="typeof DB_SuperaIntenData.errorType != 'undefined'">
        	        <if cond="DB_SuperaIntenData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_SuperaIntenData.errorMsg" />
    	            <elseif cond="DB_SuperaIntenData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_SuperaIntenData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_SuperaIntenData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#AudioFinaliza" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#AudioFinaliza" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#AudioFinaliza" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_ArgusEfect">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_ArgusEfectData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_ArgusEfectData.errorMsg == 'undefined'">
            	<if cond="typeof DB_ArgusEfectData.db_result != 'undefined'">
            		
            		<if cond="DB_ArgusEfectData.db_result.length == 0">
            			<throw event="error.com.genesyslab.composer.dbemptyresultset" messageexpr="'No records returned from database'" />
            		</if>
            		
            		<assign name="AppState.DB_ArgusEfectDBResult" expr="DB_ArgusEfectData.db_result" />
            		
            		<assign name="AppState.DB_ArgusEfectDBResultColumnNames" expr="DB_ArgusEfectData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_ArgusEfectData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_ArgusEfectData.db_outparams"/>
					
            	</if>
    			<goto next="#Copy_1_Log_CifradoDES" />
        	<else/>
        	    <if cond="typeof DB_ArgusEfectData.errorType != 'undefined'">
        	        <if cond="DB_ArgusEfectData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_ArgusEfectData.errorMsg" />
    	            <elseif cond="DB_ArgusEfectData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_ArgusEfectData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_ArgusEfectData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Copy_1_Log_CifradoDES" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbemptyresultset">
    		<goto next="#Copy_1_Log_CifradoDES" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Copy_1_Log_CifradoDES" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Copy_1_Log_CifradoDES" />
        </catch>
    	<catch event="error.com.genesyslab.composer.variablemappingerror">
    		<goto next="#Copy_1_Log_CifradoDES" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_CifradoDes">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_CifradoDesData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_CifradoDesData.errorMsg == 'undefined'">
            	<if cond="typeof DB_CifradoDesData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_CifradoDesDBResult" expr="DB_CifradoDesData.db_result" />
            		
            		<assign name="AppState.DB_CifradoDesDBResultColumnNames" expr="DB_CifradoDesData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_CifradoDesData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_CifradoDesData.db_outparams"/>
					
            	</if>
    			<goto next="#Copy_1_Log_IVPW" />
        	<else/>
        	    <if cond="typeof DB_CifradoDesData.errorType != 'undefined'">
        	        <if cond="DB_CifradoDesData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_CifradoDesData.errorMsg" />
    	            <elseif cond="DB_CifradoDesData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_CifradoDesData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_CifradoDesData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Copy_1_Log_IVPW" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Copy_1_Log_IVPW" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Copy_1_Log_IVPW" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_IVPWEfect">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_IVPWEfectData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_IVPWEfectData.errorMsg == 'undefined'">
            	<if cond="typeof DB_IVPWEfectData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_IVPWEfectDBResult" expr="DB_IVPWEfectData.db_result" />
            		
            		<assign name="AppState.DB_IVPWEfectDBResultColumnNames" expr="DB_IVPWEfectData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_IVPWEfectData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_IVPWEfectData.db_outparams"/>
					
            	</if>
    			<goto next="#ValidaRta_TrxIVPW" />
        	<else/>
        	    <if cond="typeof DB_IVPWEfectData.errorType != 'undefined'">
        	        <if cond="DB_IVPWEfectData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_IVPWEfectData.errorMsg" />
    	            <elseif cond="DB_IVPWEfectData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_IVPWEfectData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_IVPWEfectData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#ValidaRta_TrxIVPW" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#ValidaRta_TrxIVPW" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#ValidaRta_TrxIVPW" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_FallaIVPW">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_FallaIVPWData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_FallaIVPWData.errorMsg == 'undefined'">
            	<if cond="typeof DB_FallaIVPWData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_FallaIVPWDBResult" expr="DB_FallaIVPWData.db_result" />
            		
            		<assign name="AppState.DB_FallaIVPWDBResultColumnNames" expr="DB_FallaIVPWData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_FallaIVPWData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_FallaIVPWData.db_outparams"/>
					
            	</if>
    			<goto next="#Assign_TrxNoExito" />
        	<else/>
        	    <if cond="typeof DB_FallaIVPWData.errorType != 'undefined'">
        	        <if cond="DB_FallaIVPWData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_FallaIVPWData.errorMsg" />
    	            <elseif cond="DB_FallaIVPWData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_FallaIVPWData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_FallaIVPWData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Assign_TrxNoExito" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Assign_TrxNoExito" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Assign_TrxNoExito" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_IVPWExitosa">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_IVPWExitosaData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_IVPWExitosaData.errorMsg == 'undefined'">
            	<if cond="typeof DB_IVPWExitosaData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_IVPWExitosaDBResult" expr="DB_IVPWExitosaData.db_result" />
            		
            		<assign name="AppState.DB_IVPWExitosaDBResultColumnNames" expr="DB_IVPWExitosaData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_IVPWExitosaData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_IVPWExitosaData.db_outparams"/>
					
            	</if>
    			<goto next="#Au_CambioEfect" />
        	<else/>
        	    <if cond="typeof DB_IVPWExitosaData.errorType != 'undefined'">
        	        <if cond="DB_IVPWExitosaData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_IVPWExitosaData.errorMsg" />
    	            <elseif cond="DB_IVPWExitosaData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_IVPWExitosaData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_IVPWExitosaData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Au_CambioEfect" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Au_CambioEfect" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Au_CambioEfect" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_IVPWNoExitosa">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_IVPWNoExitosaData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_IVPWNoExitosaData.errorMsg == 'undefined'">
            	<if cond="typeof DB_IVPWNoExitosaData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_IVPWNoExitosaDBResult" expr="DB_IVPWNoExitosaData.db_result" />
            		
            		<assign name="AppState.DB_IVPWNoExitosaDBResultColumnNames" expr="DB_IVPWNoExitosaData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_IVPWNoExitosaData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_IVPWNoExitosaData.db_outparams"/>
					
            	</if>
    			<goto next="#Au_CambioNoEfect" />
        	<else/>
        	    <if cond="typeof DB_IVPWNoExitosaData.errorType != 'undefined'">
        	        <if cond="DB_IVPWNoExitosaData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_IVPWNoExitosaData.errorMsg" />
    	            <elseif cond="DB_IVPWNoExitosaData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_IVPWNoExitosaData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_IVPWNoExitosaData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Au_CambioNoEfect" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Au_CambioNoEfect" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Au_CambioNoEfect" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_TP_MAnt">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_TP_MAntData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_TP_MAntData.errorMsg == 'undefined'">
            	<if cond="typeof DB_TP_MAntData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_TP_MAntDBResult" expr="DB_TP_MAntData.db_result" />
            		
            		<assign name="AppState.DB_TP_MAntDBResultColumnNames" expr="DB_TP_MAntData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_TP_MAntData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_TP_MAntData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_TarjetaPrepago" />
        	<else/>
        	    <if cond="typeof DB_TP_MAntData.errorType != 'undefined'">
        	        <if cond="DB_TP_MAntData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_TP_MAntData.errorMsg" />
    	            <elseif cond="DB_TP_MAntData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_TP_MAntData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_TP_MAntData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_TP_RMenu">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_TP_RMenuData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_TP_RMenuData.errorMsg == 'undefined'">
            	<if cond="typeof DB_TP_RMenuData.db_result != 'undefined'">
            		
            		<assign name="AppState.accttype" expr="DB_TP_RMenuData.db_result" />
            		
            		<assign name="AppState.DB_TP_RMenuDBResultColumnNames" expr="DB_TP_RMenuData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_TP_RMenuData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_TP_RMenuData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_Bloqueo" />
        	<else/>
        	    <if cond="typeof DB_TP_RMenuData.errorType != 'undefined'">
        	        <if cond="DB_TP_RMenuData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_TP_RMenuData.errorMsg" />
    	            <elseif cond="DB_TP_RMenuData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_TP_RMenuData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_TP_RMenuData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_Bloqueo" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_Bloqueo" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_Bloqueo" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_BloqPerdRobo">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_BloqPerdRoboData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_BloqPerdRoboData.errorMsg == 'undefined'">
            	<if cond="typeof DB_BloqPerdRoboData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_BloqPerdRoboDBResult" expr="DB_BloqPerdRoboData.db_result" />
            		
            		<assign name="AppState.DB_BloqPerdRoboDBResultColumnNames" expr="DB_BloqPerdRoboData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_BloqPerdRoboData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_BloqPerdRoboData.db_outparams"/>
					
            	</if>
    			<goto next="#Log_setCardBlock" />
        	<else/>
        	    <if cond="typeof DB_BloqPerdRoboData.errorType != 'undefined'">
        	        <if cond="DB_BloqPerdRoboData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_BloqPerdRoboData.errorMsg" />
    	            <elseif cond="DB_BloqPerdRoboData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_BloqPerdRoboData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_BloqPerdRoboData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Log_setCardBlock" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Log_setCardBlock" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Log_setCardBlock" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_BloqTemp">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_BloqTempData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_BloqTempData.errorMsg == 'undefined'">
            	<if cond="typeof DB_BloqTempData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_BloqTempDBResult" expr="DB_BloqTempData.db_result" />
            		
            		<assign name="AppState.DB_BloqTempDBResultColumnNames" expr="DB_BloqTempData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_BloqTempData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_BloqTempData.db_outparams"/>
					
            	</if>
    			<goto next="#Log_setCardBlock" />
        	<else/>
        	    <if cond="typeof DB_BloqTempData.errorType != 'undefined'">
        	        <if cond="DB_BloqTempData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_BloqTempData.errorMsg" />
    	            <elseif cond="DB_BloqTempData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_BloqTempData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_BloqTempData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Log_setCardBlock" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Log_setCardBlock" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Log_setCardBlock" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_Falla_setCardBlock">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_Falla_setCardBlockData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_Falla_setCardBlockData.errorMsg == 'undefined'">
            	<if cond="typeof DB_Falla_setCardBlockData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_Falla_setCardBlockDBResult" expr="DB_Falla_setCardBlockData.db_result" />
            		
            		<assign name="AppState.DB_Falla_setCardBlockDBResultColumnNames" expr="DB_Falla_setCardBlockData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_Falla_setCardBlockData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_Falla_setCardBlockData.db_outparams"/>
					
            	</if>
    			<goto next="#InsertODS" />
        	<else/>
        	    <if cond="typeof DB_Falla_setCardBlockData.errorType != 'undefined'">
        	        <if cond="DB_Falla_setCardBlockData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_Falla_setCardBlockData.errorMsg" />
    	            <elseif cond="DB_Falla_setCardBlockData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_Falla_setCardBlockData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_Falla_setCardBlockData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#InsertODS" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#InsertODS" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#InsertODS" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_FallaInsertODS">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_FallaInsertODSData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_FallaInsertODSData.errorMsg == 'undefined'">
            	<if cond="typeof DB_FallaInsertODSData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_FallaInsertODSDBResult" expr="DB_FallaInsertODSData.db_result" />
            		
            		<assign name="AppState.DB_FallaInsertODSDBResultColumnNames" expr="DB_FallaInsertODSData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_FallaInsertODSData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_FallaInsertODSData.db_outparams"/>
					
            	</if>
    			<goto next="#ValRta_setCardBlock" />
        	<else/>
        	    <if cond="typeof DB_FallaInsertODSData.errorType != 'undefined'">
        	        <if cond="DB_FallaInsertODSData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_FallaInsertODSData.errorMsg" />
    	            <elseif cond="DB_FallaInsertODSData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_FallaInsertODSData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_FallaInsertODSData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#ValRta_setCardBlock" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#ValRta_setCardBlock" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#ValRta_setCardBlock" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_TransaccExitosa">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_TransaccExitosaData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_TransaccExitosaData.errorMsg == 'undefined'">
            	<if cond="typeof DB_TransaccExitosaData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_TransaccExitosaDBResult" expr="DB_TransaccExitosaData.db_result" />
            		
            		<assign name="AppState.DB_TransaccExitosaDBResultColumnNames" expr="DB_TransaccExitosaData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_TransaccExitosaData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_TransaccExitosaData.db_outparams"/>
					
            	</if>
    			<goto next="#AuMenu_BloqueoTP" />
        	<else/>
        	    <if cond="typeof DB_TransaccExitosaData.errorType != 'undefined'">
        	        <if cond="DB_TransaccExitosaData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_TransaccExitosaData.errorMsg" />
    	            <elseif cond="DB_TransaccExitosaData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_TransaccExitosaData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_TransaccExitosaData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#AuMenu_BloqueoTP" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#AuMenu_BloqueoTP" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#AuMenu_BloqueoTP" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_TransaccNoExitosa">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_TransaccNoExitosaData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_TransaccNoExitosaData.errorMsg == 'undefined'">
            	<if cond="typeof DB_TransaccNoExitosaData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_TransaccNoExitosaDBResult" expr="DB_TransaccNoExitosaData.db_result" />
            		
            		<assign name="AppState.DB_TransaccNoExitosaDBResultColumnNames" expr="DB_TransaccNoExitosaData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_TransaccNoExitosaData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_TransaccNoExitosaData.db_outparams"/>
					
            	</if>
    			<goto next="#Copy_1_despedida_M1" />
        	<else/>
        	    <if cond="typeof DB_TransaccNoExitosaData.errorType != 'undefined'">
        	        <if cond="DB_TransaccNoExitosaData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_TransaccNoExitosaData.errorMsg" />
    	            <elseif cond="DB_TransaccNoExitosaData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_TransaccNoExitosaData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_TransaccNoExitosaData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Copy_1_despedida_M1" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Copy_1_despedida_M1" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Copy_1_despedida_M1" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_TP_MenuAnter">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_TP_MenuAnterData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_TP_MenuAnterData.errorMsg == 'undefined'">
            	<if cond="typeof DB_TP_MenuAnterData.db_result != 'undefined'">
            		
            		<assign name="AppState.accttype" expr="DB_TP_MenuAnterData.db_result" />
            		
            		<assign name="AppState.DB_TP_MenuAnterDBResultColumnNames" expr="DB_TP_MenuAnterData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_TP_MenuAnterData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_TP_MenuAnterData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_TarjetaPrepago" />
        	<else/>
        	    <if cond="typeof DB_TP_MenuAnterData.errorType != 'undefined'">
        	        <if cond="DB_TP_MenuAnterData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_TP_MenuAnterData.errorMsg" />
    	            <elseif cond="DB_TP_MenuAnterData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_TP_MenuAnterData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_TP_MenuAnterData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_ConsUlt5Mov">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_ConsUlt5MovData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_ConsUlt5MovData.errorMsg == 'undefined'">
            	<if cond="typeof DB_ConsUlt5MovData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_ConsUlt5MovDBResult" expr="DB_ConsUlt5MovData.db_result" />
            		
            		<assign name="AppState.DB_ConsUlt5MovDBResultColumnNames" expr="DB_ConsUlt5MovData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_ConsUlt5MovData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_ConsUlt5MovData.db_outparams"/>
					
            	</if>
    			<goto next="#Log_getTransacciones" />
        	<else/>
        	    <if cond="typeof DB_ConsUlt5MovData.errorType != 'undefined'">
        	        <if cond="DB_ConsUlt5MovData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_ConsUlt5MovData.errorMsg" />
    	            <elseif cond="DB_ConsUlt5MovData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_ConsUlt5MovData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_ConsUlt5MovData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Log_getTransacciones" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Log_getTransacciones" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Log_getTransacciones" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_FallagetTransacciones">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_FallagetTransaccionesData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_FallagetTransaccionesData.errorMsg == 'undefined'">
            	<if cond="typeof DB_FallagetTransaccionesData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_FallagetTransaccionesDBResult" expr="DB_FallagetTransaccionesData.db_result" />
            		
            		<assign name="AppState.DB_FallagetTransaccionesDBResultColumnNames" expr="DB_FallagetTransaccionesData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_FallagetTransaccionesData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_FallagetTransaccionesData.db_outparams"/>
					
            	</if>
    			<goto next="#Copy_1_InsertODS" />
        	<else/>
        	    <if cond="typeof DB_FallagetTransaccionesData.errorType != 'undefined'">
        	        <if cond="DB_FallagetTransaccionesData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_FallagetTransaccionesData.errorMsg" />
    	            <elseif cond="DB_FallagetTransaccionesData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_FallagetTransaccionesData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_FallagetTransaccionesData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Copy_1_InsertODS" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Copy_1_InsertODS" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Copy_1_InsertODS" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_FallaInsODS">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_FallaInsODSData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_FallaInsODSData.errorMsg == 'undefined'">
            	<if cond="typeof DB_FallaInsODSData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_FallaInsODSDBResult" expr="DB_FallaInsODSData.db_result" />
            		
            		<assign name="AppState.DB_FallaInsODSDBResultColumnNames" expr="DB_FallaInsODSData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_FallaInsODSData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_FallaInsODSData.db_outparams"/>
					
            	</if>
    			<goto next="#ValRta_VPCS_I" />
        	<else/>
        	    <if cond="typeof DB_FallaInsODSData.errorType != 'undefined'">
        	        <if cond="DB_FallaInsODSData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_FallaInsODSData.errorMsg" />
    	            <elseif cond="DB_FallaInsODSData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_FallaInsODSData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_FallaInsODSData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#ValRta_VPCS_I" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#ValRta_VPCS_I" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#ValRta_VPCS_I" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_AutraExitosa">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_AutraExitosaData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_AutraExitosaData.errorMsg == 'undefined'">
            	<if cond="typeof DB_AutraExitosaData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_AutraExitosaDBResult" expr="DB_AutraExitosaData.db_result" />
            		
            		<assign name="AppState.DB_AutraExitosaDBResultColumnNames" expr="DB_AutraExitosaData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_AutraExitosaData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_AutraExitosaData.db_outparams"/>
					
            	</if>
    			<goto next="#HayMovimientos" />
        	<else/>
        	    <if cond="typeof DB_AutraExitosaData.errorType != 'undefined'">
        	        <if cond="DB_AutraExitosaData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_AutraExitosaData.errorMsg" />
    	            <elseif cond="DB_AutraExitosaData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_AutraExitosaData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_AutraExitosaData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#HayMovimientos" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#HayMovimientos" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#HayMovimientos" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_SinMov">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_SinMovData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_SinMovData.errorMsg == 'undefined'">
            	<if cond="typeof DB_SinMovData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_SinMovDBResult" expr="DB_SinMovData.db_result" />
            		
            		<assign name="AppState.DB_SinMovDBResultColumnNames" expr="DB_SinMovData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_SinMovData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_SinMovData.db_outparams"/>
					
            	</if>
    			<goto next="#Au_TarjSinMov" />
        	<else/>
        	    <if cond="typeof DB_SinMovData.errorType != 'undefined'">
        	        <if cond="DB_SinMovData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_SinMovData.errorMsg" />
    	            <elseif cond="DB_SinMovData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_SinMovData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_SinMovData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Au_TarjSinMov" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Au_TarjSinMov" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Au_TarjSinMov" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_NoInput">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'NavegacionNI.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_NoInputData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_NoInputData.errorMsg == 'undefined'">
            	<if cond="typeof DB_NoInputData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_NoInputDBResult" expr="DB_NoInputData.db_result" />
            		
            		<assign name="AppState.DB_NoInputDBResultColumnNames" expr="DB_NoInputData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_NoInputData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_NoInputData.db_outparams"/>
					
            	</if>
    			<goto next="#Despedida_Fin" />
        	<else/>
        	    <if cond="typeof DB_NoInputData.errorType != 'undefined'">
        	        <if cond="DB_NoInputData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_NoInputData.errorMsg" />
    	            <elseif cond="DB_NoInputData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_NoInputData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_NoInputData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Despedida_Fin" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Despedida_Fin" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Despedida_Fin" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_NoMatch">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'NavegacionNM.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_NoMatchData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_NoMatchData.errorMsg == 'undefined'">
            	<if cond="typeof DB_NoMatchData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_NoMatchDBResult" expr="DB_NoMatchData.db_result" />
            		
            		<assign name="AppState.DB_NoMatchDBResultColumnNames" expr="DB_NoMatchData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_NoMatchData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_NoMatchData.db_outparams"/>
					
            	</if>
    			<goto next="#Despedida_Fin" />
        	<else/>
        	    <if cond="typeof DB_NoMatchData.errorType != 'undefined'">
        	        <if cond="DB_NoMatchData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_NoMatchData.errorMsg" />
    	            <elseif cond="DB_NoMatchData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_NoMatchData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_NoMatchData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Despedida_Fin" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Despedida_Fin" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Despedida_Fin" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_TP_MAnterI">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_TP_MAnterIData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_TP_MAnterIData.errorMsg == 'undefined'">
            	<if cond="typeof DB_TP_MAnterIData.db_result != 'undefined'">
            		
            		<if cond="DB_TP_MAnterIData.db_result.length == 0">
            			<throw event="error.com.genesyslab.composer.dbemptyresultset" messageexpr="'No records returned from database'" />
            		</if>
            		
            		<assign name="AppState.DB_TP_MAnterIDBResult" expr="DB_TP_MAnterIData.db_result" />
            		
            		<assign name="AppState.DB_TP_MAnterIDBResultColumnNames" expr="DB_TP_MAnterIData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_TP_MAnterIData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_TP_MAnterIData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_TarjetaPrepago" />
        	<else/>
        	    <if cond="typeof DB_TP_MAnterIData.errorType != 'undefined'">
        	        <if cond="DB_TP_MAnterIData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_TP_MAnterIData.errorMsg" />
    	            <elseif cond="DB_TP_MAnterIData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_TP_MAnterIData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_TP_MAnterIData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_TP_RepMenu">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_TP_RepMenuData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_TP_RepMenuData.errorMsg == 'undefined'">
            	<if cond="typeof DB_TP_RepMenuData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_TP_RepMenuDBResult" expr="DB_TP_RepMenuData.db_result" />
            		
            		<assign name="AppState.DB_TP_RepMenuDBResultColumnNames" expr="DB_TP_RepMenuData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_TP_RepMenuData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_TP_RepMenuData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_SaldoMov" />
        	<else/>
        	    <if cond="typeof DB_TP_RepMenuData.errorType != 'undefined'">
        	        <if cond="DB_TP_RepMenuData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_TP_RepMenuData.errorMsg" />
    	            <elseif cond="DB_TP_RepMenuData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_TP_RepMenuData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_TP_RepMenuData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_SaldoMov" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_SaldoMov" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_SaldoMov" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_ConsSaldoTP">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_ConsSaldoTPData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_ConsSaldoTPData.errorMsg == 'undefined'">
            	<if cond="typeof DB_ConsSaldoTPData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_ConsSaldoTPDBResult" expr="DB_ConsSaldoTPData.db_result" />
            		
            		<assign name="AppState.DB_ConsSaldoTPDBResultColumnNames" expr="DB_ConsSaldoTPData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_ConsSaldoTPData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_ConsSaldoTPData.db_outparams"/>
					
            	</if>
    			<goto next="#Copy_1_Log_VPCS" />
        	<else/>
        	    <if cond="typeof DB_ConsSaldoTPData.errorType != 'undefined'">
        	        <if cond="DB_ConsSaldoTPData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_ConsSaldoTPData.errorMsg" />
    	            <elseif cond="DB_ConsSaldoTPData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_ConsSaldoTPData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_ConsSaldoTPData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Copy_1_Log_VPCS" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Copy_1_Log_VPCS" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Copy_1_Log_VPCS" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_FallaAutra_I">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_FallaAutra_IData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_FallaAutra_IData.errorMsg == 'undefined'">
            	<if cond="typeof DB_FallaAutra_IData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_FallaAutra_IDBResult" expr="DB_FallaAutra_IData.db_result" />
            		
            		<assign name="AppState.DB_FallaAutra_IDBResultColumnNames" expr="DB_FallaAutra_IData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_FallaAutra_IData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_FallaAutra_IData.db_outparams"/>
					
            	</if>
    			<goto next="#ValRta_VPCS" />
        	<else/>
        	    <if cond="typeof DB_FallaAutra_IData.errorType != 'undefined'">
        	        <if cond="DB_FallaAutra_IData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_FallaAutra_IData.errorMsg" />
    	            <elseif cond="DB_FallaAutra_IData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_FallaAutra_IData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_FallaAutra_IData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#ValRta_VPCS" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#ValRta_VPCS" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#ValRta_VPCS" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_AutraExitosa_I">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_AutraExitosa_IData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_AutraExitosa_IData.errorMsg == 'undefined'">
            	<if cond="typeof DB_AutraExitosa_IData.db_result != 'undefined'">
            		
            		<assign name="AppState.accttype" expr="DB_AutraExitosa_IData.db_result" />
            		
            		<assign name="AppState.DB_AutraExitosa_IDBResultColumnNames" expr="DB_AutraExitosa_IData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_AutraExitosa_IData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_AutraExitosa_IData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_TrxOk" />
        	<else/>
        	    <if cond="typeof DB_AutraExitosa_IData.errorType != 'undefined'">
        	        <if cond="DB_AutraExitosa_IData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_AutraExitosa_IData.errorMsg" />
    	            <elseif cond="DB_AutraExitosa_IData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_AutraExitosa_IData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_AutraExitosa_IData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_TrxOk" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_TrxOk" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_TrxOk" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_AutraNoExitosa_I">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_AutraNoExitosa_IData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_AutraNoExitosa_IData.errorMsg == 'undefined'">
            	<if cond="typeof DB_AutraNoExitosa_IData.db_result != 'undefined'">
            		
            		<assign name="AppState.accttype" expr="DB_AutraNoExitosa_IData.db_result" />
            		
            		<assign name="AppState.DB_AutraNoExitosa_IDBResultColumnNames" expr="DB_AutraNoExitosa_IData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_AutraNoExitosa_IData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_AutraNoExitosa_IData.db_outparams"/>
					
            	</if>
    			<goto next="#Copy_1_despedida_M1" />
        	<else/>
        	    <if cond="typeof DB_AutraNoExitosa_IData.errorType != 'undefined'">
        	        <if cond="DB_AutraNoExitosa_IData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_AutraNoExitosa_IData.errorMsg" />
    	            <elseif cond="DB_AutraNoExitosa_IData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_AutraNoExitosa_IData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_AutraNoExitosa_IData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Copy_1_despedida_M1" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Copy_1_despedida_M1" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Copy_1_despedida_M1" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DB_TrxExito_MA">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'Navegacion.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DB_TrxExito_MAData" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DB_TrxExito_MAData.errorMsg == 'undefined'">
            	<if cond="typeof DB_TrxExito_MAData.db_result != 'undefined'">
            		
            		<assign name="AppState.DB_TrxExito_MADBResult" expr="DB_TrxExito_MAData.db_result" />
            		
            		<assign name="AppState.DB_TrxExito_MADBResultColumnNames" expr="DB_TrxExito_MAData.db_result_columns" />

            	</if>
            	<if cond="typeof DB_TrxExito_MAData.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DB_TrxExito_MAData.db_outparams"/>
					
            	</if>
    			<goto next="#Menu_TarjetaPrepago" />
        	<else/>
        	    <if cond="typeof DB_TrxExito_MAData.errorType != 'undefined'">
        	        <if cond="DB_TrxExito_MAData.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DB_TrxExito_MAData.errorMsg" />
    	            <elseif cond="DB_TrxExito_MAData.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DB_TrxExito_MAData.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DB_TrxExito_MAData.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#Menu_TarjetaPrepago" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DBData1">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'NavegacionNI.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DBData1Data" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DBData1Data.errorMsg == 'undefined'">
            	<if cond="typeof DBData1Data.db_result != 'undefined'">
            		
            		<assign name="AppState.DBData1DBResult" expr="DBData1Data.db_result" />
            		
            		<assign name="AppState.DBData1DBResultColumnNames" expr="DBData1Data.db_result_columns" />

            	</if>
            	<if cond="typeof DBData1Data.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DBData1Data.db_outparams"/>
					
            	</if>
    			<goto next="#despedida_M1" />
        	<else/>
        	    <if cond="typeof DBData1Data.errorType != 'undefined'">
        	        <if cond="DBData1Data.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DBData1Data.errorMsg" />
    	            <elseif cond="DBData1Data.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DBData1Data.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DBData1Data.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#despedida_M1" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#despedida_M1" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#despedida_M1" />
        </catch>
	</form>

	<!-- This is the DB Data block -->
	<form id="DBData2">
		<var name="AppStateString" expr="'(' + JSON.stringify(AppState) + ')'" />
		<var name="db_query_type" expr="'SQLScriptFile'" />
		<!-- branch off based on the query type: SQL Query, Query File or Stored Procedure -->	
		<var name="db_query" expr="'NavegacionNM.sql'" />		
		<var name="db_name" expr="'ConnectionDB'" />
		<var name="db_timeout" expr="20" />
		
		
    	<block>
			<data name="DBData2Data" src="../include/dbrequest.jsp" method="post" 
				namelist="AppStateString db_query db_query_type db_name db_timeout"
				 enctype="multipart/form-data" 
				 fetchtimeout="22s"/>
				
        	<if cond="typeof DBData2Data.errorMsg == 'undefined'">
            	<if cond="typeof DBData2Data.db_result != 'undefined'">
            		
            		<assign name="AppState.DBData2DBResult" expr="DBData2Data.db_result" />
            		
            		<assign name="AppState.DBData2DBResultColumnNames" expr="DBData2Data.db_result_columns" />

            	</if>
            	<if cond="typeof DBData2Data.db_outparams != 'undefined'">
         			<log expr="'db_outparams:' + DBData2Data.db_outparams"/>
					
            	</if>
    			<goto next="#despedida_M1" />
        	<else/>
        	    <if cond="typeof DBData2Data.errorType != 'undefined'">
        	        <if cond="DBData2Data.errorType == 'timeout'">
    	        	    <throw event="error.com.genesyslab.composer.dbtimeout" messageexpr="DBData2Data.errorMsg" />
    	            <elseif cond="DBData2Data.errorType == 'connectionerror'" />
    	        	    <throw event="error.com.genesyslab.composer.dbconnectionerror" messageexpr="DBData2Data.errorMsg" />
    	            </if>
        		<else/>
	        		<throw event="error.com.genesyslab.composer.dberror" messageexpr="DBData2Data.errorMsg" />
        		</if>
        	</if>
		</block>
    	<catch event="error.com.genesyslab.composer.dberror">
    		<goto next="#despedida_M1" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbtimeout">
    		<goto next="#despedida_M1" />
        </catch>
    	<catch event="error.com.genesyslab.composer.dbconnectionerror">
    		<goto next="#despedida_M1" />
        </catch>
	</form>

	<!-- This is the Branching block -->
	<form id="ValRta_setCardBlock">
		<block>
			<if cond="AppState.StatusCode == ''">
				
				<!-- This is the OutLink -->
				<goto next="#Assi_TrxNoExitosa" />
			</if>
			<if cond="AppState.StatusCode == '0' || AppState.StatusCode ==0">
				
				<!-- Post Action -->
				<script>try{
				AppState.m_Movimiento == 'Validacion setCardBlock Exitoso'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#DB_TransaccExitosa" />
			</if>
			<goto next="#Assi_TrxNoExitosa" />
		</block>
	</form>

</vxml>
